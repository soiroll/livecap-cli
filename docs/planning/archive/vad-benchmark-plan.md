# çµ±åˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å®Ÿè£…è¨ˆç”»

> **Status**: âœ… COMPLETED
> **ä½œæˆæ—¥:** 2025-11-25
> **å®Œäº†æ—¥:** 2025-11-28
> **é–¢é€£ Issue:** #86 (Closed)
> **å¾Œç¶™:** #126 (Phase D: VAD ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–)

---

## 1. æ¦‚è¦

### 1.1 ç›®çš„

livecap-cli ã®éŸ³å£°èªè­˜ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å…¨ä½“ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã®**çµ±åˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚

**VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ + ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’åŒæ™‚å®Ÿè£…**ã—ã€ä»¥ä¸‹ã‚’å®Ÿç¾ï¼š

- è¤‡æ•°ã® VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆ9æ§‹æˆï¼‰ã‚’æ¯”è¼ƒè©•ä¾¡
- å…¨ ASR ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆ10ç¨®é¡ï¼‰ã®å˜ä½“æ€§èƒ½ã‚’è©•ä¾¡
- VAD Ã— ASR ã®æœ€é©ãªçµ„ã¿åˆã‚ã›ã‚’ç™ºè¦‹

### 1.2 èƒŒæ™¯

- Phase 1 ã§ Silero VAD ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦æ¡ç”¨
- `docs/reference/vad-comparison.md` ã®èª¿æŸ»ã«ã‚ˆã‚Šã€ä»–ã® VADï¼ˆJaVAD, TenVADï¼‰ãŒå„ªã‚Œã¦ã„ã‚‹å¯èƒ½æ€§
- æœ¬ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ **10ç¨®é¡ã® ASR ã‚¨ãƒ³ã‚¸ãƒ³**ãŒå®Ÿè£…æ¸ˆã¿
- VAD Ã— ASR ã®æœ€é©ãªçµ„ã¿åˆã‚ã›ã‚’ç™ºè¦‹ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

### 1.3 åŒæ™‚å®Ÿè£…ã®ç†ç”±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚³ãƒ¼ãƒ‰å…±æœ‰ç‡åˆ†æ                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  å…±é€šéƒ¨åˆ† (80%):                                                 â”‚
â”‚  â”œâ”€â”€ metrics.py      # WER/CER/RTFè¨ˆç®—                          â”‚
â”‚  â”œâ”€â”€ datasets.py     # éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ« + Ground Truthç®¡ç†           â”‚
â”‚  â”œâ”€â”€ engines.py      # 10ã‚¨ãƒ³ã‚¸ãƒ³ã®çµ±ä¸€ç®¡ç†                      â”‚
â”‚  â””â”€â”€ reports.py      # JSON/Markdownå‡ºåŠ›                        â”‚
â”‚                                                                  â”‚
â”‚  å›ºæœ‰éƒ¨åˆ† (20%):                                                 â”‚
â”‚  â”œâ”€â”€ vad/runner.py   # VADå‡¦ç† + ASRå‘¼ã³å‡ºã—                    â”‚
â”‚  â””â”€â”€ asr/runner.py   # ASRå‘¼ã³å‡ºã—ã®ã¿ï¼ˆVADã‚¹ã‚­ãƒƒãƒ—ï¼‰           â”‚
â”‚                                                                  â”‚
â”‚  â†’ å…±é€šåŸºç›¤ã‚’ä½œã‚‹æ™‚ç‚¹ã§ã€ASRãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¯å®Ÿè³ªå®Œæˆ               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å·¥æ•°æ¯”è¼ƒ:**

| ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ | å…±é€šåŸºç›¤ | VADå›ºæœ‰ | ASRå›ºæœ‰ | åˆè¨ˆ |
|-----------|---------|---------|---------|------|
| VADã®ã¿å…ˆè¡Œ | 5æ—¥ | 2æ—¥ | - | 7æ—¥ |
| å¾Œã‹ã‚‰ASRè¿½åŠ  | - | - | 3æ—¥ | **10æ—¥** |
| **åŒæ™‚å®Ÿè£…** | 5æ—¥ | 2æ—¥ | 1æ—¥ | **8æ—¥** |

### 1.4 ã‚¹ã‚³ãƒ¼ãƒ—

| å«ã‚€ | å«ã¾ãªã„ |
|------|----------|
| VAD Ã— å…¨ASRè©•ä¾¡ï¼ˆ10 VAD Ã— 10 ASRï¼‰ | VAD/ASR ã®æœ¬ç•ªåˆ‡ã‚Šæ›¿ãˆ |
| ASR å˜ä½“è©•ä¾¡ï¼ˆ10ã‚¨ãƒ³ã‚¸ãƒ³ï¼‰ | æ–°ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£… |
| æ—¥æœ¬èªãƒ»è‹±èªã§ã®è©•ä¾¡ | å…¨è¨€èªã§ã®è©•ä¾¡ |
| CLI ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ„ãƒ¼ãƒ« | GUI |
| Windows self-hosted runner (RTX 4090) | GitHub-hosted GPU |

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ

**å…±é€šåŸºç›¤ + å€‹åˆ¥ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯**ã®è¨­è¨ˆã§ã€ã‚³ãƒ¼ãƒ‰å†åˆ©ç”¨ã‚’æœ€å¤§åŒ–ã€‚

```
benchmarks/
â”œâ”€â”€ common/                    # å…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« (80%)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ metrics.py             # WER/CER/RTF è¨ˆç®—
â”‚   â”œâ”€â”€ datasets.py            # ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç®¡ç†
â”‚   â”œâ”€â”€ engines.py             # ASR ã‚¨ãƒ³ã‚¸ãƒ³ç®¡ç†
â”‚   â””â”€â”€ reports.py             # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
â”œâ”€â”€ asr/                       # ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ runner.py              # ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ
â”‚   â””â”€â”€ cli.py                 # CLI ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â””â”€â”€ vad/                       # VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ runner.py              # VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ
    â”œâ”€â”€ cli.py                 # CLI ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
    â”œâ”€â”€ factory.py             # VADFactory (engines/ ãƒ‘ã‚¿ãƒ¼ãƒ³è¸è¥²)
    â””â”€â”€ backends/              # VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
        â”œâ”€â”€ __init__.py
        â”œâ”€â”€ base.py            # VADBackend Protocol
        â”œâ”€â”€ silero.py          # SileroVADBackend
        â”œâ”€â”€ javad.py           # JaVADBackend
        â”œâ”€â”€ webrtc.py          # WebRTCVADBackend
        â””â”€â”€ tenvad.py          # TenVADBackend
```

### 2.2 è©•ä¾¡ãƒ•ãƒ­ãƒ¼ã®é–¢ä¿‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼ˆåŸºç¤ï¼‰                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ãƒ†ã‚¹ãƒˆéŸ³å£° (.wav)                                               â”‚
â”‚       â”‚                                                          â”‚
â”‚       â–¼                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ASR Engine (10 engines)                                 â”‚    â”‚
â”‚  â”‚ â†’ éŸ³å£°å…¨ä½“ã‚’æ–‡å­—èµ·ã“ã—                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚                                                          â”‚
â”‚       â–¼                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ è©•ä¾¡ (common/metrics.py)                                â”‚    â”‚
â”‚  â”‚ â†’ WER/CER è¨ˆç®—                                          â”‚    â”‚
â”‚  â”‚ â†’ RTF è¨ˆæ¸¬                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
              VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¯ã€ŒVADå‡¦ç†ã‚’å‰ã«æŒ¿å…¥ã€ã™ã‚‹ã ã‘
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼ˆASRã®ä¸Šã«æ§‹ç¯‰ï¼‰                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ãƒ†ã‚¹ãƒˆéŸ³å£° (.wav)                                               â”‚
â”‚       â”‚                                                          â”‚
â”‚       â–¼                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ VAD Backend (9 configurations)   â† è¿½åŠ éƒ¨åˆ†             â”‚    â”‚
â”‚  â”‚ â†’ éŸ³å£°ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ¤œå‡º                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚                                                          â”‚
â”‚       â–¼                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ASR Engine (å…±é€šéƒ¨åˆ†ã‚’å†åˆ©ç”¨)                            â”‚    â”‚
â”‚  â”‚ â†’ å„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’æ–‡å­—èµ·ã“ã—                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚                                                          â”‚
â”‚       â–¼                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ è©•ä¾¡ (common/metrics.py ã‚’å†åˆ©ç”¨)                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (âœ… å®Ÿè£…æ¸ˆã¿)

> å®Ÿè£…: `benchmarks/common/`

| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | æ©Ÿèƒ½ |
|-----------|------|
| `metrics.py` | WER/CER/RTFè¨ˆç®—ã€GPUMemoryTracker |
| `text_normalization.py` | è¨€èªåˆ¥ãƒ†ã‚­ã‚¹ãƒˆæ­£è¦åŒ– |
| `datasets.py` | AudioFile (lazy load)ã€Datasetã€DatasetManager |
| `engines.py` | BenchmarkEngineManager (ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€VADç„¡åŠ¹åŒ–) |
| `reports.py` | BenchmarkReporter (JSON/Markdown/Consoleå‡ºåŠ›) |

---

## 3. è©•ä¾¡ãƒãƒˆãƒªã‚¯ã‚¹

### 3.1 ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ASR è©•ä¾¡ãƒãƒˆãƒªã‚¯ã‚¹                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ASR (10ã‚¨ãƒ³ã‚¸ãƒ³)              è¨€èª (2+)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ reazonspeech    â”‚â”€â”€â”€â”€â”€â”€jaâ”€â”€â”‚ Japanese â”‚                      â”‚
â”‚  â”‚ parakeet_ja     â”‚â”€â”€â”€â”€â”€â”€jaâ”€â”€â”‚          â”‚                      â”‚
â”‚  â”‚ parakeet        â”‚â”€â”€â”€â”€â”€â”€enâ”€â”€â”‚ English  â”‚                      â”‚
â”‚  â”‚ canary          â”‚â”€â”€â”€â”€â”€â”€enâ”€â”€â”‚          â”‚                      â”‚
â”‚  â”‚ voxtral         â”‚â”€â”€â”€â”€â”€â”€enâ”€â”€â”‚ (Future) â”‚                      â”‚
â”‚  â”‚ whispers2t_*    â”‚â”€â”€â”€â”€â”€â”€allâ”€â”‚ de,fr,es â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                  â”‚
â”‚  Total: 10 ASR Ã— 2 Lang = 20 tests (è¨€èªå¯¾å¿œåˆ†ã®ã¿)              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 VAD Ã— ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VAD Ã— ASR è©•ä¾¡ãƒãƒˆãƒªã‚¯ã‚¹                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  VAD (9æ§‹æˆ)           ASR (10ã‚¨ãƒ³ã‚¸ãƒ³)         è¨€èª (2+)       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Silero v6   â”‚      â”‚ reazonspeech    â”‚â”€â”€jaâ”€â”€â”‚ Japanese â”‚    â”‚
â”‚  â”‚ TenVAD      â”‚      â”‚ parakeet_ja     â”‚â”€â”€jaâ”€â”€â”‚          â”‚    â”‚
â”‚  â”‚ JaVAD tiny  â”‚  Ã—   â”‚ parakeet        â”‚â”€â”€enâ”€â”€â”‚ English  â”‚    â”‚
â”‚  â”‚ JaVAD bal.  â”‚      â”‚ canary          â”‚â”€â”€enâ”€â”€â”‚          â”‚    â”‚
â”‚  â”‚ JaVAD prec. â”‚      â”‚ voxtral         â”‚â”€â”€enâ”€â”€â”‚          â”‚    â”‚
â”‚  â”‚ WebRTC 0-3  â”‚      â”‚ whispers2t_*    â”‚â”€â”€allâ”€â”‚          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  Full Matrix: 9 VAD Ã— 10 ASR Ã— 2 Lang = 180 combinations        â”‚
â”‚  Practical:   9 VAD Ã— 3-4 ASR/lang Ã— 2 Lang â‰ˆ 54-72 tests      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 è¨€èªåˆ¥æ¨å¥¨ã‚¨ãƒ³ã‚¸ãƒ³

| è¨€èª | æ¨å¥¨ã‚¨ãƒ³ã‚¸ãƒ³ | ä»£æ›¿ã‚¨ãƒ³ã‚¸ãƒ³ |
|------|-------------|-------------|
| **Japanese (ja)** | reazonspeech, parakeet_ja | whispers2t_base |
| **English (en)** | parakeet, canary | whispers2t_base, voxtral |
| **German (de)** | canary | whispers2t_base, voxtral |
| **French (fr)** | canary | whispers2t_base, voxtral |
| **Spanish (es)** | canary | whispers2t_base, voxtral |

### 3.4 å®Ÿè¡Œæˆ¦ç•¥

**Quick Mode** (CI ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ):
- ASR: è¨€èªåˆ¥ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 2 ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆç´„ 4 ãƒ†ã‚¹ãƒˆï¼‰
  - **ja**: `parakeet_ja`, `whispers2t_large_v3`ï¼ˆæ—¥æœ¬èªç‰¹åŒ– + æ±ç”¨é«˜ç²¾åº¦ï¼‰
  - **en**: `parakeet`, `whispers2t_large_v3`ï¼ˆè‹±èªç‰¹åŒ– + æ±ç”¨é«˜ç²¾åº¦ï¼‰
  - â€» Linux/Windows ä¸¡å¯¾å¿œã‚’è€ƒæ…®ã—ã€`reazonspeech` ã¯ Quick Mode ã‹ã‚‰é™¤å¤–
- VAD: Silero v6, JaVAD precise, WebRTC mode 3ï¼ˆç´„ 12 ãƒ†ã‚¹ãƒˆï¼‰
- æ¨å®šæ™‚é–“: ~5åˆ†

**Standard Mode**:
- ASR: è¨€èªåˆ¥å…¨ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆç´„ 10 ãƒ†ã‚¹ãƒˆï¼‰
- VAD: å…¨ 9 æ§‹æˆ Ã— è¨€èªåˆ¥ 2-3 ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆç´„ 36-54 ãƒ†ã‚¹ãƒˆï¼‰
- æ¨å®šæ™‚é–“: ~20åˆ†

**Full Mode** (æ‰‹å‹•å®Ÿè¡Œ):
- ASR: å…¨ã‚¨ãƒ³ã‚¸ãƒ³ Ã— å…¨å¯¾å¿œè¨€èªï¼ˆç´„ 20 ãƒ†ã‚¹ãƒˆï¼‰
- VAD: å…¨ 9 æ§‹æˆ Ã— å…¨å¯¾å¿œã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆç´„ 72+ ãƒ†ã‚¹ãƒˆï¼‰
- æ¨å®šæ™‚é–“: ~60åˆ†

---

## 4. ASR ã‚¨ãƒ³ã‚¸ãƒ³ä¸€è¦§

### 4.1 å®Ÿè£…æ¸ˆã¿ã‚¨ãƒ³ã‚¸ãƒ³

`engines/metadata.py` ã‹ã‚‰å–å¾—ã—ãŸå…¨ 10 ã‚¨ãƒ³ã‚¸ãƒ³ï¼š

| ID | è¡¨ç¤ºå | å¯¾å¿œè¨€èª | ã‚µã‚¤ã‚º | VADå†…è”µ |
|----|--------|---------|--------|---------|
| `reazonspeech` | ReazonSpeech K2 v2 | ja | 159MB | âŒ |
| `parakeet` | NVIDIA Parakeet TDT 0.6B | en | 1.2GB | âŒ |
| `parakeet_ja` | NVIDIA Parakeet TDT CTC JA | ja | 600MB | âŒ |
| `canary` | NVIDIA Canary 1B Flash | en,de,fr,es | 1.5GB | âŒ |
| `voxtral` | MistralAI Voxtral Mini 3B | en,es,fr,pt,hi,de,nl,it | 3GB | âŒ |
| `whispers2t_tiny` | WhisperS2T Tiny | å¤šè¨€èª | 39MB | âœ… |
| `whispers2t_base` | WhisperS2T Base | å¤šè¨€èª | 74MB | âœ… |
| `whispers2t_small` | WhisperS2T Small | å¤šè¨€èª | 244MB | âœ… |
| `whispers2t_medium` | WhisperS2T Medium | å¤šè¨€èª | 769MB | âœ… |
| `whispers2t_large_v3` | WhisperS2T Large-v3 | å¤šè¨€èª | 1.55GB | âœ… |

### 4.2 VAD ç„¡åŠ¹åŒ–

WhisperS2T ã®ã¿å†…è”µ VAD ã‚’æŒã¤ã€‚ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ™‚ã¯ `use_vad=False` ã§ç„¡åŠ¹åŒ–ï¼š

```python
# engines/whispers2t_engine.py:52
self.use_vad = self.engine_config.get('use_vad', True)

# engines/whispers2t_engine.py:290-304
if self.use_vad:
    outputs = self.model.transcribe_with_vad(...)
else:
    outputs = self.model.transcribe(...)  # VAD ãªã—
```

ä»–ã®ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆParakeet, ReazonSpeech, Canary, Voxtralï¼‰ã¯ VAD é–¢é€£ã‚³ãƒ¼ãƒ‰ãŒãªã„ãŸã‚ã€ãã®ã¾ã¾ä½¿ç”¨å¯èƒ½ã€‚

---

## 5. VAD æ§‹æˆä¸€è¦§

### 5.1 ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å¯¾è±¡

**åˆè¨ˆ 9 æ§‹æˆ**ï¼ˆSilero v5 ã¯ v6 ã®ä¸Šä½äº’æ›ã®ãŸã‚é™¤å¤–ï¼‰:

| VAD | ãƒ¢ãƒ‡ãƒ«/è¨­å®š | ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ | ç‰¹å¾´ |
|-----|------------|-----------|------|
| Silero VAD v6 | ONNX | MIT | ç¾åœ¨ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã€é«˜ç²¾åº¦ |
| TenVAD | - | ç‹¬è‡ª | æœ€è»½é‡ãƒ»æœ€é«˜é€Ÿï¼ˆè©•ä¾¡ã®ã¿ï¼‰ |
| JaVAD | tiny | MIT | 0.64s windowã€å³æ™‚æ¤œå‡ºå‘ã‘ |
| JaVAD | balanced | MIT | 1.92s windowã€ãƒãƒ©ãƒ³ã‚¹å‹ |
| JaVAD | precise | MIT | 3.84s windowã€æœ€é«˜ç²¾åº¦ |
| WebRTC VAD | mode 0 | BSD | æœ€ã‚‚å¯›å®¹ã€èª¤æ¤œå‡ºå°‘ |
| WebRTC VAD | mode 1 | BSD | ã‚„ã‚„å³æ ¼ |
| WebRTC VAD | mode 2 | BSD | å³æ ¼ |
| WebRTC VAD | mode 3 | BSD | æœ€ã‚‚å³æ ¼ã€è¦‹é€ƒã—å¤š |

### 5.2 VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­è¨ˆ (Phase C ã§å®Ÿè£…)

**è¨­è¨ˆæ±ºå®š:** æ—¢å­˜ `livecap_cli/vad/` ã‚’æ‹¡å¼µã—ã€è¤‡æ•°ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆ

**å®Ÿè£…å…ˆ:**
- æœ¬ç•ªç”¨: `livecap_cli/vad/backends/`
- ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å°‚ç”¨: `benchmarks/vad/backends/`

**è¨­è¨ˆæ–¹é‡:**
- `VADBackend` Protocol ã‚’æ‹¡å¼µï¼ˆ`frame_size`, `name` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£è¿½åŠ ï¼‰
- VADProcessor ã‚’å‹•çš„ãƒ•ãƒ¬ãƒ¼ãƒ ã‚µã‚¤ã‚ºå¯¾å¿œã«å¤‰æ›´
- JaVAD ã¯ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å°‚ç”¨ï¼ˆãƒ¬ã‚¤ãƒ†ãƒ³ã‚· 640ms+ ã®ãŸã‚ï¼‰

**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¸€è¦§:**

| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | Protocol æº–æ‹  | å®Ÿè£…å…ˆ | å‚™è€ƒ |
|-------------|--------------|--------|------|
| Silero | âœ… | `livecap_cli/vad/backends/silero.py` | æ—¢å­˜ã€æš«å®šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
| WebRTC | âœ… | `livecap_cli/vad/backends/webrtc.py` | æ–°è¦ |
| TenVAD | âœ… | `livecap_cli/vad/backends/tenvad.py` | æ–°è¦ã€ä½¿ç”¨æ™‚è­¦å‘Š |
| JaVAD | âŒ | `benchmarks/vad/backends/javad.py` | **ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å°‚ç”¨** |

**JaVAD ãŒãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å°‚ç”¨ã®ç†ç”±:**
- æœ€å° 640ms ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¸é©ï¼‰
- per-frame probability ã§ã¯ãªã segments ã‚’è¿”ã™ï¼ˆProtocol ä¸é©åˆï¼‰
- ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å¾Œã€ä¾¡å€¤ãŒæ˜ç¢ºã«ãªã‚Œã°æœ¬ç•ªå¯¾å¿œã‚’æ¤œè¨

**TenVAD ã®æ‰±ã„:**
- ä»–ã® VAD ã¨åŒæ§˜ã« `livecap_cli/vad/backends/` ã«é…ç½®
- ä½¿ç”¨æ™‚ã«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è­¦å‘Šã‚’è¡¨ç¤ºï¼ˆãƒ©ã‚¤ã‚»ãƒ³ã‚¹æ¡ä»¶é™å®šçš„ï¼‰

è©³ç´°ãªå®Ÿè£…æ–¹é‡ã¯ **Phase C** (Section 8) ã‚’å‚ç…§ã€‚

---

## 6. è©•ä¾¡æŒ‡æ¨™

### 6.1 ASR ç²¾åº¦æŒ‡æ¨™

| æŒ‡æ¨™ | èª¬æ˜ | è¨ˆç®—æ–¹æ³• |
|------|------|----------|
| **WER** | Word Error Rate | `(S + D + I) / N` |
| **CER** | Character Error Rate | æ–‡å­—å˜ä½ã® WERï¼ˆæ—¥æœ¬èªå‘ã‘ï¼‰ |

- `S`: ç½®æ›æ•°ã€`D`: å‰Šé™¤æ•°ã€`I`: æŒ¿å…¥æ•°ã€`N`: å‚ç…§å˜èªæ•°
- ãƒ©ã‚¤ãƒ–ãƒ©ãƒª: [jiwer](https://github.com/jitsi/jiwer)

### 6.2 æ€§èƒ½æŒ‡æ¨™

| æŒ‡æ¨™ | èª¬æ˜ | å˜ä½ |
|------|------|------|
| **RTF** | Real-Time Factor | æ¯”ç‡ï¼ˆä½ã„ã»ã©é«˜é€Ÿï¼‰ |
| **Latency** | å…¥åŠ›â†’å‡ºåŠ›ã®é…å»¶ | ms |
| **Memory (RAM)** | ãƒ”ãƒ¼ã‚¯RAMä½¿ç”¨é‡ | MB |
| **GPU VRAM (Model)** | ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰å¾Œã®VRAMä½¿ç”¨é‡ | MB |
| **GPU VRAM (Peak)** | æ¨è«–ä¸­ã®ãƒ”ãƒ¼ã‚¯VRAMä½¿ç”¨é‡ | MB |

#### RAM ãƒ¡ãƒ¢ãƒªæ¸¬å®šæ–¹æ³•

Python æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã® `tracemalloc` ã‚’ä½¿ç”¨:

```python
import tracemalloc

def measure_ram_usage(func):
    """RAM ä½¿ç”¨é‡ã‚’æ¸¬å®š"""
    tracemalloc.start()
    result = func()
    current, peak = tracemalloc.get_traced_memory()
    tracemalloc.stop()
    return {
        "memory_current_mb": current / 1024**2,
        "memory_peak_mb": peak / 1024**2,
    }
```

**æ³¨æ„:**
- `tracemalloc` ã¯ Python ãƒ’ãƒ¼ãƒ—ã®ã¿ã‚’æ¸¬å®šï¼ˆãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¡ãƒ¢ãƒªã¯å«ã¾ãªã„ï¼‰
- ç›¸å¯¾æ¯”è¼ƒã«ã¯ååˆ†ãªç²¾åº¦
- å¿…è¦ã«å¿œã˜ã¦ `psutil` ã¸ã®åˆ‡ã‚Šæ›¿ãˆã‚’æ¤œè¨ï¼ˆPhase B ã§æ¤œè¨¼ï¼‰

#### GPU ãƒ¡ãƒ¢ãƒªæ¸¬å®šæ–¹æ³•

```python
import torch

def measure_gpu_memory(func):
    """GPU ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’æ¸¬å®šã™ã‚‹ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿"""
    if not torch.cuda.is_available():
        return {"gpu_memory_model_mb": None, "gpu_memory_peak_mb": None}

    torch.cuda.reset_peak_memory_stats()
    torch.cuda.synchronize()

    # ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰å¾Œã®ä½¿ç”¨é‡
    result = func()
    torch.cuda.synchronize()
    model_memory = torch.cuda.memory_allocated() / 1024**2

    # æ¨è«–å¾Œã®ãƒ”ãƒ¼ã‚¯ä½¿ç”¨é‡
    peak_memory = torch.cuda.max_memory_allocated() / 1024**2

    return {
        "gpu_memory_model_mb": model_memory,
        "gpu_memory_peak_mb": peak_memory,
    }
```

**æ³¨æ„:**
- CPU ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯ `None` ã‚’è¨˜éŒ²
- ONNX Runtime (GPU) ã®å ´åˆã¯ `nvidia-smi` çµŒç”±ã§æ¸¬å®šãŒå¿…è¦ãªå ´åˆãŒã‚ã‚‹
- æ¸¬å®šã®å†ç¾æ€§ã®ãŸã‚ã€warm-up å®Ÿè¡Œå¾Œã«æ¸¬å®šã™ã‚‹

### 6.3 VAD å›ºæœ‰æŒ‡æ¨™

| æŒ‡æ¨™ | èª¬æ˜ |
|------|------|
| **Segments** | æ¤œå‡ºã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ•° |
| **Avg Duration** | å¹³å‡ã‚»ã‚°ãƒ¡ãƒ³ãƒˆé•· |
| **Speech Ratio** | éŸ³å£°åŒºé–“ã®å‰²åˆ |
| **VAD RTF** | VADå‡¦ç†ã® Real-Time Factor |

#### VAD RTF ã®å®šç¾©

```
vad_rtf = VADå‡¦ç†ã®å£æ™‚è¨ˆæ™‚é–“ / éŸ³å£°ã®é•·ã•
```

**è¨ˆæ¸¬åŒºé–“:**
- **å«ã‚€**: ãƒ¢ãƒ‡ãƒ«æ¨è«–æ™‚é–“ã€ãƒ•ãƒ¬ãƒ¼ãƒ åˆ†å‰²å‡¦ç†ã€ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯
- **å«ã¾ãªã„**: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ« I/Oã€ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼ˆå‰å‡¦ç†ã¨ã—ã¦åˆ¥é€”å®Ÿè¡Œï¼‰

**å®Ÿè£…ä¾‹:**
```python
# ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã¯è¨ˆæ¸¬å¤–
audio_16k = resample_to_16khz(audio, original_sr)

# VADå‡¦ç†æ™‚é–“ã®ã¿è¨ˆæ¸¬
vad_start = time.perf_counter()
segments = vad.process_audio(audio_16k, 16000)
vad_time = time.perf_counter() - vad_start

vad_rtf = vad_time / audio_duration
```

#### VAD ç²¾åº¦æŒ‡æ¨™ã«ã¤ã„ã¦

**æœ¬ãƒ•ã‚§ãƒ¼ã‚º (C-2) ã§ã¯ VAD å˜ä½“ã®ç²¾åº¦ï¼ˆF1, èª¤æ¤œå‡ºç‡ç­‰ï¼‰ã¯æœªè¨ˆæ¸¬ã€‚**

**ç†ç”±:**
- ãƒ©ãƒ™ãƒ«ä»˜ã VAD Ground Truth ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ãªã„
- JSUT/LibriSpeech ã¯ ASR ç”¨ã‚³ãƒ¼ãƒ‘ã‚¹ã§ã‚ã‚Šã€éŸ³å£°åŒºé–“ã®æ­£ç¢ºãªã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æŒãŸãªã„

**è©•ä¾¡ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:**
æœ¬ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã¯ã€VAD ã®ã€Œç²¾åº¦ã€ã‚’**ä¸‹æµã‚¿ã‚¹ã‚¯ï¼ˆASRï¼‰ã® WER/CER ã¸ã®å½±éŸ¿**ã§é–“æ¥çš„ã«è©•ä¾¡ã™ã‚‹:

```
VAD ãŒè‰¯ã„ â†’ ã‚»ã‚°ãƒ¡ãƒ³ãƒˆå¢ƒç•ŒãŒé©åˆ‡ â†’ ASR ç²¾åº¦ãŒé«˜ã„
VAD ãŒæ‚ªã„ â†’ éŸ³å£°ã®åˆ‡ã‚Šè½ã¨ã—/ãƒã‚¤ã‚ºæ··å…¥ â†’ ASR ç²¾åº¦ãŒä½ä¸‹
```

**å°†æ¥ã®æ‹¡å¼µï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰:**
- AVA-Speech ç­‰ã®ãƒ©ãƒ™ãƒ«ä»˜ããƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ã‚ˆã‚‹ç›´æ¥è©•ä¾¡ï¼ˆPrecision, Recall, F1ï¼‰
- åŸºæº– VADï¼ˆä¾‹: Sileroï¼‰ã¨ã®äº¤å·®æ¯”è¼ƒï¼ˆIoU, Segment Agreement Rateï¼‰
- æ‰‹å‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ã‚µãƒ–ã‚»ãƒƒãƒˆè©•ä¾¡

> ğŸ“ è©³ç´°ã¯ Issue #86 ã®èª¿æŸ»ãƒ¡ãƒ¢ã€ŒVAD è©•ä¾¡æ‰‹æ³•ã®èª¿æŸ»ãƒ¡ãƒ¢ã€ã‚’å‚ç…§

### 6.4 Raw vs Normalized ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆPhase B å®Ÿè£…äºˆå®šï¼‰

**èƒŒæ™¯:**
æ­£è¦åŒ–å‰å¾Œã®ä¸¡æ–¹ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å ±å‘Šã™ã‚‹ã“ã¨ã§ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã‚¢ãƒ“ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹ | èª¬æ˜ | ç”¨é€” |
|-----------|------|------|
| **WER/CER (Normalized)** | æ­£è¦åŒ–å¾Œï¼ˆå¥èª­ç‚¹é™¤å»ã€å°æ–‡å­—åŒ–ï¼‰| ã‚¨ãƒ³ã‚¸ãƒ³æ¯”è¼ƒã®ä¸»æŒ‡æ¨™ |
| **WER/CER (Raw)** | æ­£è¦åŒ–å‰ï¼ˆå…ƒã®ãƒ†ã‚­ã‚¹ãƒˆï¼‰| å¥èª­ç‚¹äºˆæ¸¬ç²¾åº¦ã®æŠŠæ¡ |

**å®Ÿè£…ä¾‹:**
```python
@dataclass
class BenchmarkResult:
    # Primary metrics (normalized)
    wer: float | None = None
    cer: float | None = None

    # Raw metrics (traceability)
    wer_raw: float | None = None
    cer_raw: float | None = None
```

**å‡ºåŠ›ä¾‹:**
```
Engine        CER    CER(raw)   RTF   VRAM
-----------  -----  ---------  ----  ------
reazonspeech  3.2%     8.1%    0.15  2048MB
whispers2t    5.1%    12.3%    0.08  3072MB
```

**ãƒ¡ãƒªãƒƒãƒˆ:**
- æ­£è¦åŒ–ã®å½±éŸ¿ã‚’å®šé‡çš„ã«æŠŠæ¡
- å¥èª­ç‚¹äºˆæ¸¬ç²¾åº¦ã®æ¯”è¼ƒãŒå¯èƒ½
- ãƒ‡ãƒãƒƒã‚°ãƒ»åˆ†ææ™‚ã«æœ‰ç”¨

### 6.5 çµ±è¨ˆçš„å³å¯†æ€§

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:** VAD Ã— ASR ã®çµ„ã¿åˆã‚ã›æ¯”è¼ƒã€çµæœã¯å…¬é–‹ï¼ˆè«–æ–‡ã»ã©ã®å³å¯†æ€§ã¯ä¸è¦ï¼‰

#### æ±ºå®šäº‹é …: 2ãƒ¢ãƒ¼ãƒ‰åˆ¶

| ãƒ¢ãƒ¼ãƒ‰ | å®Ÿè¡Œå›æ•° | ç”¨é€” | CLI |
|--------|---------|------|-----|
| **å˜ä¸€å®Ÿè¡Œ** | 1å› | é–‹ç™ºãƒ»CIãƒ»ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ†ã‚¹ãƒˆ | `--runs 1`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ |
| **è¤‡æ•°å®Ÿè¡Œ** | 3å› | å…¬é–‹ç”¨ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ | `--runs 3` |

#### ãƒ¡ãƒˆãƒªã‚¯ã‚¹åˆ¥ã®æ¸¬å®šæ–¹æ³•

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹ | æ¸¬å®šæ–¹æ³• | ç†ç”± |
|-----------|---------|------|
| **RTF** | ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—1å› + Nå›æ¸¬å®š | GPUçŠ¶æ…‹ã«ã‚ˆã‚‹å¤‰å‹•ã‚’æ’é™¤ |
| **WER/CER** | ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã«1å› | æ±ºå®šçš„ï¼ˆåŒã˜å…¥åŠ›=åŒã˜å‡ºåŠ›ï¼‰ |
| **VRAM** | 1å›ã®ã¿ | ã»ã¼å›ºå®šå€¤ |

#### RTF ã®å¤‰å‹•è¦å› 

| è¦å›  | å½±éŸ¿åº¦ | èª¬æ˜ |
|------|--------|------|
| GPU ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ— | é«˜ | åˆå›æ¨è«–ã¯CUDAã‚«ãƒ¼ãƒãƒ«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§é…ã„ |
| GPU ã‚µãƒ¼ãƒãƒ«ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚° | ä¸­ | æ¸©åº¦ä¸Šæ˜‡ã§ã‚¯ãƒ­ãƒƒã‚¯ä½ä¸‹ |
| ãƒ¡ãƒ¢ãƒªçŠ¶æ…‹ | ä½ | VRAMæ–­ç‰‡åŒ–ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥çŠ¶æ…‹ |

**ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—å¾Œã®æœŸå¾…å¤‰å‹•å¹…:** Â±5-10%ï¼ˆå°‚ç”¨ãƒã‚·ãƒ³ã§ã¯ Â±2-5%ï¼‰

#### Warm-up ã‚¿ã‚¤ãƒŸãƒ³ã‚°

**æ±ºå®šäº‹é …:** ã‚¨ãƒ³ã‚¸ãƒ³ã”ã¨ã«1å›ï¼ˆæœ€åˆã®ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†å‰ï¼‰

| æ–¹å¼ | æ¡ç”¨ | ç†ç”± |
|------|------|------|
| ã‚¨ãƒ³ã‚¸ãƒ³ã”ã¨ | âœ… | é«˜é€Ÿã€GPUçŠ¶æ…‹ã®å®‰å®šåŒ–ã«ååˆ† |
| ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ | âŒ | æ™‚é–“ãŒã‹ã‹ã‚Šã™ãã‚‹ï¼ˆ100ãƒ•ã‚¡ã‚¤ãƒ« = 100å›ã® warm-upï¼‰ |

#### å®Ÿè£…ä¾‹

```python
def benchmark_engine(engine, dataset, runs=1):
    """ã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ"""
    # ã‚¨ãƒ³ã‚¸ãƒ³ã”ã¨ã«1å›ã® warm-upï¼ˆæœ€åˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã§å®Ÿè¡Œï¼‰
    first_file = dataset.files[0]
    engine.transcribe(first_file.audio, first_file.sample_rate)

    results = []
    for audio_file in dataset:
        # RTFæ¸¬å®šï¼ˆrunså›å®Ÿè¡Œã—ã¦å¹³å‡ã‚’å–ã‚‹ï¼‰
        times = []
        for _ in range(runs):
            start = time.perf_counter()
            transcript, _ = engine.transcribe(audio_file.audio, audio_file.sample_rate)
            times.append(time.perf_counter() - start)

        mean_time = statistics.mean(times)
        rtf = mean_time / audio_file.duration

        results.append({
            "file_id": audio_file.stem,
            "transcript": transcript,
            "rtf": rtf,
        })

    return results
```

#### å‡ºåŠ›ä¾‹ï¼ˆè¤‡æ•°å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ï¼‰

```
=== ASR Benchmark Results (3 runs) ===

--- Japanese ---
Engine        CER    RTF (meanÂ±std)    VRAM
-----------  -----  ----------------  ------
reazonspeech  3.2%   0.15 Â± 0.01     2048MB
parakeet_ja   4.5%   0.12 Â± 0.02     3584MB
whispers2t    5.1%   0.08 Â± 0.01     1536MB
```

#### CLI ä½¿ç”¨ä¾‹

```bash
# é–‹ç™ºæ™‚ï¼ˆé«˜é€Ÿï¼‰
python -m benchmarks.asr --mode quick

# å…¬é–‹ç”¨ï¼ˆä¿¡é ¼æ€§é‡è¦–ï¼‰
python -m benchmarks.asr --mode standard --runs 3
```

#### Phase B å®Ÿè£…æ±ºå®šäº‹é …

- `--runs` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ Phase B ã§å®Ÿè£…
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `--runs 1`ï¼ˆå˜ä¸€å®Ÿè¡Œï¼‰
- è¤‡æ•°å®Ÿè¡Œæ™‚ã¯ RTF ã® `mean` ã‚’è¨˜éŒ²ï¼ˆ`std/min/max` ã¯å¿…è¦ã«å¿œã˜ã¦å¾Œã‹ã‚‰è¿½åŠ ï¼‰

### 6.6 ã‚¨ãƒ³ã‚¸ãƒ³Ã—è¨€èªã®äº’æ›æ€§ãƒã‚§ãƒƒã‚¯

**æ±ºå®šäº‹é …:** éå¯¾å¿œè¨€èªã®ãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•ã‚¹ã‚­ãƒƒãƒ—

ã‚¨ãƒ³ã‚¸ãƒ³ãŒå¯¾å¿œã—ã¦ã„ãªã„è¨€èªã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ã€ã‚¨ãƒ©ãƒ¼ã§ã¯ãªãè‡ªå‹•çš„ã«ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã€‚

```python
# benchmarks/common/datasets.py
def get_files_for_engine(self, engine_id: str) -> Iterator[AudioFile]:
    from engines.metadata import EngineMetadata
    info = EngineMetadata.get(engine_id)
    supported = info.supported_languages if info else None

    for f in self.files:
        if supported is None or f.language in supported:
            yield f
        else:
            logger.debug(f"Skipping {f.path}: {engine_id} doesn't support {f.language}")
```

**ãƒ¡ãƒªãƒƒãƒˆ:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ï¼ˆæ˜ç¤ºçš„ãªé™¤å¤–æŒ‡å®šãŒä¸è¦ï¼‰
- `--engine reazonspeech --language ja en` æŒ‡å®šæ™‚ã€`reazonspeech` ã¯ `en` ã‚’è‡ªå‹•ã‚¹ã‚­ãƒƒãƒ—

### 6.7 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥

**æ±ºå®šäº‹é …:** ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‹è­¦å‘Š

| ã‚±ãƒ¼ã‚¹ | æŒ™å‹• | ç†ç”± |
|--------|------|------|
| ã‚¨ãƒ³ã‚¸ãƒ³ãƒ­ãƒ¼ãƒ‰å¤±æ•— | ã‚¹ã‚­ãƒƒãƒ—ï¼‹è­¦å‘Š | ä»–ã‚¨ãƒ³ã‚¸ãƒ³ã®çµæœã¯å–å¾—ã—ãŸã„ |
| éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿å¤±æ•— | ã‚¹ã‚­ãƒƒãƒ—ï¼‹è­¦å‘Š | ä»–ãƒ•ã‚¡ã‚¤ãƒ«ã®çµæœã¯å–å¾—ã—ãŸã„ |
| æ¨è«–ä¸­ã‚¨ãƒ©ãƒ¼ | ã‚¹ã‚­ãƒƒãƒ—ï¼‹è­¦å‘Š | åŒä¸Š |

**å®Ÿè£…ä¾‹:**

```python
try:
    engine = engine_manager.get_engine(engine_id, device, language)
except Exception as e:
    logger.warning(f"Failed to load {engine_id}: {e}")
    continue  # æ¬¡ã®ã‚¨ãƒ³ã‚¸ãƒ³ã¸
```

**å°†æ¥ã®æ‹¡å¼µ:** `--strict` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹ãƒ¢ãƒ¼ãƒ‰ã‚’è¿½åŠ å¯èƒ½

### 6.8 é€²æ—è¡¨ç¤º

**æ±ºå®šäº‹é …:** `tqdm` ã‚’ä½¿ç”¨ã—ãŸé€²æ—ãƒãƒ¼è¡¨ç¤º

Full ãƒ¢ãƒ¼ãƒ‰ï¼ˆ60åˆ†+ï¼‰ã‚’å¤šç”¨ã™ã‚‹ã“ã¨ã‚’è€ƒæ…®ã—ã€`tqdm` ã«ã‚ˆã‚‹é€²æ—è¡¨ç¤ºã‚’å®Ÿè£…ã€‚

```python
from tqdm import tqdm

for engine_id in tqdm(engines, desc="Engines"):
    for audio_file in tqdm(dataset, desc=f"  {engine_id}", leave=False):
        result = benchmark_single(engine_id, audio_file)
```

**ä¾å­˜é–¢ä¿‚:** `tqdm` ã‚’ `benchmark` extra ã«è¿½åŠ 

### 6.9 æ—¢çŸ¥ã®åˆ¶é™äº‹é …

#### æ—¥æœ¬èªã²ã‚‰ãŒãª/æ¼¢å­—è¡¨è¨˜æºã‚Œ

**å•é¡Œ:**
ASRå‡ºåŠ›ã¨ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§æ–‡å­—ç¨®ï¼ˆã²ã‚‰ãŒãª/æ¼¢å­—ï¼‰ãŒç•°ãªã‚‹å ´åˆã€CERã«å½±éŸ¿ã™ã‚‹ã€‚

```
ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹: "é£Ÿã¹ã‚‹"ï¼ˆæ¼¢å­—ï¼‰
ASRå‡ºåŠ›:     "ãŸã¹ã‚‹"ï¼ˆã²ã‚‰ãŒãªï¼‰
â†’ CER = 33%ï¼ˆæ„å‘³çš„ã«ã¯åŒä¸€ï¼‰
```

**è©•ä¾¡:**
- **å½±éŸ¿åº¦: ä½** - ç¾ä»£ã®æ—¥æœ¬èªASRã¯æ¼¢å­—å¤‰æ›å¾Œã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å‡ºåŠ›
- **å¯¾å¿œ: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã®ã¿** - ASRã®è¨€èªãƒ¢ãƒ‡ãƒ«ãŒç•°ãªã‚‹è¡¨è¨˜ã‚’é¸æŠã—ãŸå ´åˆã¯ã€å®Ÿè³ªçš„ãªå·®ç•°ã¨ã—ã¦æ‰±ã†

**ç†ç”±:**
1. ASRãƒ¢ãƒ‡ãƒ«ã¯å†…éƒ¨ã§è¨€èªãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹æ¼¢å­—å¤‰æ›ã‚’è¡Œã†
2. ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚³ãƒ¼ãƒ‘ã‚¹ï¼ˆJSUTç­‰ï¼‰ã‚‚æ¼¢å­—æ··ã˜ã‚Šã®è‡ªç„¶ãªæ—¥æœ¬èª
3. è¡¨è¨˜ã®é•ã„ã¯å­—å¹•å“è³ªã«å½±éŸ¿ã™ã‚‹ãŸã‚ã€ã‚¨ãƒ©ãƒ¼ã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ã®ã¯å¦¥å½“

**æ³¨è¨˜:**
ä¸€éƒ¨ã®è¡¨è¨˜æºã‚Œï¼ˆã€Œå­ä¾›ã€vsã€Œå­ã©ã‚‚ã€ç­‰ï¼‰ã¯çœŸã®ã‚¨ãƒ©ãƒ¼ã§ã¯ãªã„ãŒã€å…¨ä½“ã®CERã¸ã®å½±éŸ¿ã¯é™å®šçš„ã€‚

---

## 7. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

### 7.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

**æ±ºå®šäº‹é …:** è¨€èªåˆ¥ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã«çµ±ä¸€ï¼ˆ`audio/` ã¨ `prepared/` ã§ä¸€è²«æ€§ã‚’æŒãŸã›ã‚‹ï¼‰

```
tests/assets/
â”œâ”€â”€ audio/                    # gitè¿½è·¡ï¼ˆquickãƒ¢ãƒ¼ãƒ‰ç”¨ã€æ•°ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚   â”œâ”€â”€ ja/
â”‚   â”‚   â”œâ”€â”€ jsut_basic5000_0001.wav
â”‚   â”‚   â””â”€â”€ jsut_basic5000_0001.txt
â”‚   â””â”€â”€ en/
â”‚       â”œâ”€â”€ librispeech_1089-134686-0001.wav
â”‚       â””â”€â”€ librispeech_1089-134686-0001.txt
â”‚
â”œâ”€â”€ prepared/                 # gitç„¡è¦–ï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ ja/                   # å¤‰æ›æ¸ˆã¿æ—¥æœ¬èªãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â”œâ”€â”€ jsut_basic5000_0002.wav
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ en/                   # å¤‰æ›æ¸ˆã¿è‹±èªãƒ‡ãƒ¼ã‚¿
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ source/                   # gitç„¡è¦–ï¼ˆã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‘ã‚¹ï¼‰
â”‚   â”œâ”€â”€ jsut/jsut_ver1.1/     # 3.4GB - JSUT v1.1
â”‚   â””â”€â”€ librispeech/test-clean/  # 358MB - LibriSpeech
â”‚
â””â”€â”€ README.md
```

### 7.2 æ§‹é€ å¤‰æ›´ã®å½±éŸ¿

ç¾åœ¨ã® `tests/assets/audio/` ã¯ãƒ•ãƒ©ãƒƒãƒˆæ§‹é€ ã®ãŸã‚ã€è¨€èªåˆ¥ãƒ•ã‚©ãƒ«ãƒ€ã¸ã®ç§»è¡ŒãŒå¿…è¦ã€‚

**ç¾åœ¨ã®æ§‹é€ :**
```
tests/assets/audio/
â”œâ”€â”€ jsut_basic5000_0001_ja.wav
â”œâ”€â”€ jsut_basic5000_0001_ja.txt
â”œâ”€â”€ librispeech_test-clean_1089-134686-0001_en.wav
â””â”€â”€ librispeech_test-clean_1089-134686-0001_en.txt
```

**å¤‰æ›´å¾Œ:**
```
tests/assets/audio/
â”œâ”€â”€ ja/
â”‚   â”œâ”€â”€ jsut_basic5000_0001.wav
â”‚   â””â”€â”€ jsut_basic5000_0001.txt
â””â”€â”€ en/
    â”œâ”€â”€ librispeech_1089-134686-0001.wav
    â””â”€â”€ librispeech_1089-134686-0001.txt
```

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `tests/audio_sources/test_file_source.py` | ãƒ‘ã‚¹æ›´æ–° |
| `tests/core/test_text_normalization.py` | ãƒ‘ã‚¹æ›´æ–° |
| `tests/integration/engines/test_smoke_engines.py` | ãƒ‘ã‚¹æ›´æ–° |
| `tests/integration/realtime/test_mock_realtime_flow.py` | ãƒ‘ã‚¹æ›´æ–° |
| `tests/integration/realtime/test_e2e_realtime_flow.py` | ãƒ‘ã‚¹æ›´æ–° |
| `examples/realtime/basic_file_transcription.py` | ãƒ‘ã‚¹æ›´æ–° |
| `examples/realtime/custom_vad_config.py` | ãƒ‘ã‚¹æ›´æ–° |
| `examples/realtime/callback_api.py` | ãƒ‘ã‚¹æ›´æ–° |
| `examples/README.md` | ãƒ‘ã‚¹æ›´æ–° |
| `tests/assets/README.md` | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° |
| `tests/utils/text_normalization.py` | `get_language_from_filename()` æ›´æ–° |

**å®Ÿè£…ã‚¿ã‚¹ã‚¯:** Phase A-2 ã«å«ã‚ã‚‹

### 7.3 ã‚½ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

| ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ | è¨€èª | å½¢å¼ | ãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ |
|-------------|------|------|-----------------|-----------|
| JSUT v1.1 | ja | WAV | `ID:ãƒ†ã‚­ã‚¹ãƒˆ` | éå•†ç”¨ |
| LibriSpeech test-clean | en | FLAC | `ID TEXT` | CC BY 4.0 |

### 7.4 çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä»•æ§˜

å¤‰æ›ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«çµ±ä¸€ï¼š

| é …ç›® | ä»•æ§˜ |
|------|------|
| éŸ³å£°å½¢å¼ | WAV, 16kHz, mono, 16bit |
| æ­£è¦åŒ– | ãƒ”ãƒ¼ã‚¯ -1dBFS |
| ãƒ•ã‚¡ã‚¤ãƒ«å | `{corpus}_{subset}_{id}.wav` |
| ãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | åŒå `.txt`ã€UTF-8ã€1è¡Œã€æœ«å°¾æ”¹è¡Œ |
| ãƒ•ã‚©ãƒ«ãƒ€ | `{lang}/` (ja, en) |

### 7.5 å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

| ãƒ¢ãƒ¼ãƒ‰ | ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ | ãƒ•ã‚¡ã‚¤ãƒ«æ•° | ç”¨é€” |
|--------|-------------|-----------|------|
| `quick` | `audio/` | ja:2, en:2 | CI smoke test |
| `standard` | `prepared/` | ja:100, en:100 (èª¿æ•´å¯) | ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º |
| `full` | `prepared/` | å…¨ãƒ•ã‚¡ã‚¤ãƒ« | æœ¬æ ¼ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ |

### 7.6 å¤‰æ›ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
# standard ãƒ¢ãƒ¼ãƒ‰ï¼ˆå„è¨€èª100ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
python scripts/prepare_benchmark_data.py --mode standard

# full ãƒ¢ãƒ¼ãƒ‰ï¼ˆå…¨ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
python scripts/prepare_benchmark_data.py --mode full

# ã‚«ã‚¹ã‚¿ãƒ 
python scripts/prepare_benchmark_data.py --ja-limit 500 --en-limit 200
```

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‡¦ç†å†…å®¹ï¼š

1. **JSUT**: `transcript_utf8.txt` èª­ã¿è¾¼ã¿ â†’ WAV æ­£è¦åŒ– â†’ `prepared/ja/` ã¸å‡ºåŠ›
2. **LibriSpeech**: `*.trans.txt` èª­ã¿è¾¼ã¿ â†’ FLACâ†’WAV å¤‰æ› + æ­£è¦åŒ– â†’ `prepared/en/` ã¸å‡ºåŠ›

### 7.7 .gitignore è¨­å®š

```gitignore
# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‘ã‚¹ï¼ˆå¤§è¦æ¨¡ï¼‰
tests/assets/source/

# ç”Ÿæˆãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ©ã‚¤ã‚»ãƒ³ã‚¹å•é¡Œï¼‰
tests/assets/prepared/
```

---

## 8. å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

### æ¦‚è¦: Phase A/B/C ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

| Phase | å†…å®¹ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|-------|------|----------|
| **A** | åŸºç›¤æ§‹ç¯‰ | âœ… å®Œäº† |
| **B** | ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ | âœ… å®Œäº† |
| **C** | VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ | ğŸ”œ æ¬¡ |

**å®Ÿè£…ç†ç”±:**
1. **å‹•ä½œç¢ºèªãŒå…ˆ**: å£Šã‚ŒãŸã‚¨ãƒ³ã‚¸ãƒ³ã§ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã—ã¦ã‚‚ç„¡æ„å‘³
2. **ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒå…ˆ**: ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã®ä¾¡å€¤ã¯ãƒ‡ãƒ¼ã‚¿å“è³ªã§æ±ºã¾ã‚‹
3. **ASR ãŒå…ˆ**: VAD ã¯ ASR ã®ä¸Šã«æ§‹ç¯‰ï¼ˆä¾å­˜é–¢ä¿‚ï¼‰

---

### Phase A: åŸºç›¤æ§‹ç¯‰ (âœ… å®Œäº†)

| ã‚¿ã‚¹ã‚¯ | PR | å†…å®¹ |
|--------|-----|------|
| A-1 | #91-95 | å…¨10ã‚¨ãƒ³ã‚¸ãƒ³ã® smoke test å®Œäº† |
| A-2a | #97 | `tests/assets/audio/` ã‚’è¨€èªåˆ¥ãƒ•ã‚©ãƒ«ãƒ€ã«å†æ§‹æˆ |
| A-2b | #98 | `scripts/prepare_benchmark_data.py` ä½œæˆ |
| A-3 | #100 | `benchmarks/common/` å®Ÿè£… |
| A-4 | #100 | `pyproject.toml` ã« benchmark extra è¿½åŠ  |

---

### Phase B: ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ (âœ… å®Œäº†)

**å¯¾è±¡:** `benchmarks/asr/`

| ã‚¿ã‚¹ã‚¯ | PR | å†…å®¹ |
|--------|-----|------|
| B-1 | #103 | `ASRBenchmarkRunner` å®Ÿè£… |
| B-2 | #103 | CLI å®Ÿè£… (`python -m benchmarks.asr`) |
| B-3 | #103 | å‹•ä½œç¢ºèªã¨ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œ |
| B-4 | #104 | CI ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š (`.github/workflows/benchmark.yml`) |
| B-5 | #105 | CI: CUDA PyTorch ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¿®æ­£ |
| B-6 | #108 | VRAM ç´¯ç©æ¸¬å®šãƒã‚°ä¿®æ­£ (Issue #107) |

**æ¤œè¨¼çµæœ:** Quick mode å®Ÿè¡ŒæˆåŠŸã€VRAM æ¸¬å®šæ­£å¸¸ (~2450MB/ã‚¨ãƒ³ã‚¸ãƒ³)

**CLI ä½¿ç”¨ä¾‹:**
```bash
python -m benchmarks.asr --mode quick
python -m benchmarks.asr --engine parakeet_ja whispers2t_large_v3 --language ja
python -m benchmarks.asr --mode standard --runs 3 --output results.json
```

---

### Phase C: VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ (ğŸ”œ é€²è¡Œä¸­)

**å¯¾è±¡:** `benchmarks/vad/`

| ã‚¿ã‚¹ã‚¯ | PR | å†…å®¹ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|--------|-----|------|----------|
| C-1 | #110, #114 | VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆSection 5.2 å‚ç…§ï¼‰ | âœ… å®Œäº† |
| C-2 | - | `VADBenchmarkRunner` å®Ÿè£…ï¼ˆC-2ï½C-7 ã‚»ã‚¯ã‚·ãƒ§ãƒ³å‚ç…§ï¼‰ | ğŸ”œ æ¬¡ |
| C-3 | - | CI ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä½œæˆ (`vad-benchmark.yml`) | ğŸ“‹ å¾…æ©Ÿ |

**CLI ä½¿ç”¨ä¾‹:**
```bash
python -m benchmarks.vad --vad silero_v6 javad_precise --asr parakeet_ja
python -m benchmarks.vad --mode standard --format markdown
```

#### C-1: VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…æ–¹é‡

##### è¨­è¨ˆæ±ºå®šã‚µãƒãƒªãƒ¼

| é …ç›® | æ±ºå®š | ç†ç”± |
|------|------|------|
| ãƒ•ãƒ¬ãƒ¼ãƒ ã‚µã‚¤ã‚º | å‹•çš„ï¼ˆProtocol ã« `frame_size` è¿½åŠ ï¼‰ | å„ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒæœ€é©ã‚µã‚¤ã‚ºã§å‹•ä½œ |
| JaVAD | ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å°‚ç”¨ | 640ms+ ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã€Protocol ä¸é©åˆ |
| å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å†…éƒ¨ã§å¤‰æ› | æ¨™æº–ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| é¸æŠ API | ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆç¾è¡Œç¶­æŒï¼‰ | Pythonicã€å‹å®‰å…¨ |
| ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ VAD | Sileroï¼ˆæš«å®šï¼‰ | ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å¾Œã«å†æ¤œè¨ (#96) |

##### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
æœ¬ç•ªç”¨ï¼ˆlivecap_cli/vad/backends/ï¼‰:
â”œâ”€â”€ __init__.py     # VADBackend Protocolï¼ˆæ‹¡å¼µç‰ˆï¼‰
â”œâ”€â”€ silero.py       # SileroVADBackend (æ—¢å­˜)
â”œâ”€â”€ webrtc.py       # WebRTCVADBackend (æ–°è¦)
â””â”€â”€ tenvad.py       # TenVADBackend (æ–°è¦ã€ä½¿ç”¨æ™‚è­¦å‘Š)

ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å°‚ç”¨ï¼ˆbenchmarks/vad/backends/ï¼‰:
â””â”€â”€ javad.py        # JaVADPipeline (ãƒãƒƒãƒå‡¦ç†å°‚ç”¨)
```

##### VADBackend Protocolï¼ˆæ‹¡å¼µç‰ˆï¼‰

```python
class VADBackend(Protocol):
    """VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚"""

    def process(self, audio: np.ndarray) -> float:
        """éŸ³å£°ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’å‡¦ç†ã—ã¦ç™ºè©±ç¢ºç‡ã‚’è¿”ã™ã€‚

        Args:
            audio: float32 éŸ³å£°ãƒ‡ãƒ¼ã‚¿ï¼ˆé•·ã•ã¯ frame_size samplesï¼‰

        Returns:
            ç™ºè©±ç¢ºç‡ (0.0-1.0)
        """
        ...

    def reset(self) -> None:
        """å†…éƒ¨çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã€‚"""
        ...

    @property
    def frame_size(self) -> int:
        """16kHz ã§ã®æ¨å¥¨ãƒ•ãƒ¬ãƒ¼ãƒ ã‚µã‚¤ã‚ºï¼ˆsamplesï¼‰"""
        ...

    @property
    def name(self) -> str:
        """ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è­˜åˆ¥å­"""
        ...
```

##### VADProcessor ã®å¤‰æ›´

```python
class VADProcessor:
    def __init__(self, backend: VADBackend = None):
        self._backend = backend or self._create_default_backend()
        self._frame_size = self._backend.frame_size  # å‹•çš„ã«æ±ºå®š
```

##### ãƒ•ãƒ¬ãƒ¼ãƒ ã‚µã‚¤ã‚ºå‡¦ç†

| Backend | ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µã‚¤ã‚º | VADProcessor å¯¾å¿œ |
|---------|----------------|------------------|
| Silero | 512 samples (32ms) | `frame_size=512` |
| WebRTC | 160/320/480 samples | `frame_size=320` (20ms æ¨å¥¨) |
| TenVAD | 160/256 samples | `frame_size=256` (16ms) |
| JaVAD | 10,240+ samples | **Protocol éæº–æ‹ **ï¼ˆä¸‹è¨˜å‚ç…§ï¼‰ |

##### JaVAD: ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å°‚ç”¨

**ç†ç”±:**
1. **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ ¹æœ¬çš„é•ã„**: JaVAD ã¯ per-frame probability ã§ã¯ãªã segments ã‚’è¿”ã™
2. **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·**: æœ€å° 640ms ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç”¨é€”ã«ä¸é©
3. **å®Ÿè£…ã‚³ã‚¹ãƒˆ**: Protocol æº–æ‹ ã«ã¯è¤‡é›‘ãªå¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯ãŒå¿…è¦ã€ç²¾åº¦ä½ä¸‹ãƒªã‚¹ã‚¯ã‚ã‚Š
4. **ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç›®çš„**: çœŸã®æ€§èƒ½ã‚’æ¸¬å®šã™ã‚‹ã«ã¯ãƒã‚¤ãƒ†ã‚£ãƒ– API ãŒæœ€é©

**å°†æ¥ã®æ¤œè¨:**
ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœã§ JaVAD ã®ä¾¡å€¤ãŒæ˜ç¢ºã«ãªã£ãŸå ´åˆã€ä»¥ä¸‹ã‚’æ¤œè¨:
- ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†å°‚ç”¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦æä¾›
- ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œã®å®Ÿè£…ï¼ˆéœ€è¦ãŒã‚ã‚Œã°ï¼‰

```python
# benchmarks/vad/backends/javad.py
class JaVADPipeline:
    """JaVAD ãƒãƒƒãƒå‡¦ç†ï¼ˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å°‚ç”¨ï¼‰

    âš ï¸ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°éå¯¾å¿œ
    ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç”¨é€”ã«ã¯ silero, webrtc, tenvad ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
    """

    def __init__(self, model: str = "balanced"):
        """
        Args:
            model: "tiny" (640ms), "balanced" (1920ms), "precise" (3840ms)
        """
        ...

    def process_audio(self, audio: np.ndarray, sample_rate: int) -> list[tuple[float, float]]:
        """éŸ³å£°å…¨ä½“ã‚’å‡¦ç†ã—ã¦ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’è¿”ã™ã€‚"""
        from javad import Processor
        processor = Processor(model=self.model)
        return processor.intervals(audio)
```

##### å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›

å„ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒå†…éƒ¨ã§å¤‰æ›ã‚’å‡¦ç†:

```python
class WebRTCVADBackend:
    def process(self, audio: np.ndarray) -> float:
        # float32 [-1, 1] â†’ int16 bytesï¼ˆWebRTC è¦æ±‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼‰
        audio_int16 = (audio * 32767).astype(np.int16)
        audio_bytes = audio_int16.tobytes()
        return float(self._vad.is_speech(audio_bytes, 16000))

class TenVADBackend:
    def process(self, audio: np.ndarray) -> float:
        # float32 â†’ int16ï¼ˆTenVAD è¦æ±‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼‰
        audio_int16 = (audio * 32767).astype(np.int16)
        prob, flag = self._vad.process(audio_int16)
        return prob
```

##### TenVAD è­¦å‘Šå¯¾å¿œ

```python
# livecap_cli/vad/backends/tenvad.py
class TenVADBackend:
    """TenVAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã€‚"""

    def __init__(self, hop_size: int = 256, threshold: float = 0.5):
        logger.warning(
            "TenVAD has limited license terms. "
            "Please review the license before use: "
            "https://github.com/TEN-framework/ten-vad"
        )
        ...
```

##### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ VAD ã¨è‡ªå‹•é¸æŠ

**ç¾æ™‚ç‚¹:** Silero ã‚’æš«å®šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦ç¶­æŒï¼ˆæ—¢å­˜äº’æ›æ€§ï¼‰

**å°†æ¥ï¼ˆPhase C å¾Œï¼‰:** è¨€èªã«å¿œã˜ãŸè‡ªå‹•é¸æŠã‚’å®Ÿè£… â†’ #96 ã§æ¤œè¨

```python
# å°†æ¥ã®å®Ÿè£…æ¡ˆ
class VADConfig:
    backend: str = "auto"  # "auto", "silero", "webrtc", "tenvad"

def get_optimal_vad(language: str) -> str:
    """ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœã«åŸºã¥ãæœ€é© VAD ã‚’è¿”ã™"""
    # Phase C å®Œäº†å¾Œã«å®Ÿè£…
    OPTIMAL_VAD = {
        "ja": "???",  # ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœã§æ±ºå®š
        "en": "???",
        "default": "silero",
    }
    return OPTIMAL_VAD.get(language, OPTIMAL_VAD["default"])
```

#### C-2: VADBenchmarkRunner å®Ÿè£…è¨­è¨ˆ

##### ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å°‚ç”¨çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

Protocolæº–æ‹  VAD (Silero, WebRTC, TenVAD) ã¨ JaVAD (Protocoléæº–æ‹ ) ã®ä¸¡æ–¹ã‚’
åŒä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æ‰±ã†ãŸã‚ã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å°‚ç”¨ã® Protocol ã‚’å®šç¾©ã€‚

```python
# benchmarks/vad/backends/base.py
class VADBenchmarkBackend(Protocol):
    """ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç”¨ VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚

    Protocolæº–æ‹  VAD ã¨ JaVAD ã®ä¸¡æ–¹ã‚’åŒã˜æ–¹æ³•ã§æ‰±ãˆã‚‹ã€‚
    """

    def process_audio(
        self, audio: np.ndarray, sample_rate: int
    ) -> list[tuple[float, float]]:
        """éŸ³å£°å…¨ä½“ã‚’å‡¦ç†ã—ã¦ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’è¿”ã™ã€‚

        Args:
            audio: float32å½¢å¼ã®éŸ³å£°ãƒ‡ãƒ¼ã‚¿
            sample_rate: ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒ¼ãƒˆ

        Returns:
            ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®ãƒªã‚¹ãƒˆ [(start_time, end_time), ...]
            æ™‚é–“ã¯ç§’å˜ä½
        """
        ...

    @property
    def name(self) -> str:
        """ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è­˜åˆ¥å­"""
        ...

    @property
    def config(self) -> dict:
        """ãƒ¬ãƒãƒ¼ãƒˆç”¨ã®è¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿”ã™ã€‚

        Returns:
            VAD å›ºæœ‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¾æ›¸
            ä¾‹: {"mode": 3, "frame_duration_ms": 20}
        """
        ...
```

##### å„ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã® config å®Ÿè£…ä¾‹

```python
# WebRTC VAD
class WebRTCVAD:
    @property
    def config(self) -> dict:
        return {
            "mode": self._mode,
            "frame_duration_ms": self._frame_duration_ms,
        }

# TenVAD
class TenVAD:
    @property
    def config(self) -> dict:
        return {
            "hop_size": self._hop_size,
            "threshold": self._threshold,
        }

# Silero VAD
class SileroVAD:
    @property
    def config(self) -> dict:
        return {
            "threshold": self._threshold,
        }

# JaVAD Pipeline
class JaVADPipeline:
    WINDOW_SIZES = {"tiny": 640, "balanced": 1920, "precise": 3840}

    @property
    def config(self) -> dict:
        return {
            "model": self._model,
            "window_ms": self.WINDOW_SIZES[self._model],
        }
```

##### VADProcessorWrapperï¼ˆProtocolæº–æ‹  VAD ç”¨ï¼‰

æœ¬ç•ªç”¨ VADProcessor ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã€‚

```python
# benchmarks/vad/backends/processor_wrapper.py
class VADProcessorWrapper:
    """VADProcessor ã‚’ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ãƒ©ãƒƒãƒ—ã€‚

    Protocolæº–æ‹ ã® VADBackend (Silero, WebRTC, TenVAD) ã‚’
    VADBenchmarkBackend ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ã€‚
    """

    SAMPLE_RATE = 16000  # å…¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å…±é€š

    def __init__(self, backend: VADBackend, config: VADConfig | None = None):
        self._processor = VADProcessor(config=config, backend=backend)
        self._backend = backend

    def process_audio(
        self, audio: np.ndarray, sample_rate: int
    ) -> list[tuple[float, float]]:
        """éŸ³å£°å…¨ä½“ã‚’å‡¦ç†ã—ã¦ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’è¿”ã™ã€‚

        âš ï¸ æ™‚é–“ç²¾åº¦ã®ãŸã‚ã€å…ˆã«16kHzã«ãƒªã‚µãƒ³ãƒ—ãƒ«ã—ã¦ã‹ã‚‰å‡¦ç†ã™ã‚‹ã€‚
        """
        # 1. å…ˆã«å…¨ä½“ã‚’16kHzã«ãƒªã‚µãƒ³ãƒ—ãƒ«ï¼ˆæ™‚é–“åŸºæº–ã‚’çµ±ä¸€ï¼‰
        if sample_rate != self.SAMPLE_RATE:
            audio_16k = self._resample(audio, sample_rate, self.SAMPLE_RATE)
        else:
            audio_16k = audio

        # 2. frame_size ã®æ•´æ•°å€ã§ãƒãƒ£ãƒ³ã‚¯å‡¦ç†
        frame_size = self._backend.frame_size
        chunk_size = frame_size * 100  # ä¾‹: 512 * 100 = 51200 samples â‰ˆ 3.2ç§’

        segments = []
        self._processor.reset()

        for i in range(0, len(audio_16k), chunk_size):
            chunk = audio_16k[i:i+chunk_size]
            vad_segments = self._processor.process_chunk(chunk, self.SAMPLE_RATE)
            for seg in vad_segments:
                if seg.is_final:
                    segments.append((seg.start_time, seg.end_time))

        # æ®‹ã‚Šã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’å–å¾—
        final = self._processor.finalize()
        if final:
            segments.append((final.start_time, final.end_time))

        return segments

    def _resample(self, audio: np.ndarray, orig_sr: int, target_sr: int) -> np.ndarray:
        """ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼ˆå®Ÿè£…ã¯ librosa ã¾ãŸã¯ scipy ã‚’ä½¿ç”¨ï¼‰"""
        import librosa
        return librosa.resample(audio, orig_sr=orig_sr, target_sr=target_sr)

    @property
    def name(self) -> str:
        return self._backend.name
```

**è¨­è¨ˆç†ç”±:**
1. **ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç›®çš„ã«é©åˆ**: ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½ã®ãƒãƒƒãƒå‡¦ç†ãŒå‰æ
2. **JaVAD ã¨ã®è‡ªç„¶ãªçµ±åˆ**: ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒãã®ã¾ã¾ä½¿ãˆã‚‹
3. **Runner ã®ç°¡æ½”ã•**: å˜ä¸€ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼ã§å…¨ VAD ã‚’æ‰±ãˆã‚‹
4. **æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã¸ã®å½±éŸ¿ãªã—**: `livecap_cli/vad/` ã¯å¤‰æ›´ä¸è¦

##### é16kHzå…¥åŠ›æ™‚ã®ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°æˆ¦ç•¥

**å•é¡Œ:**
ãƒãƒ£ãƒ³ã‚¯å¢ƒç•Œã”ã¨ã«ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã™ã‚‹ã¨ã€ã‚µãƒ³ãƒ—ãƒ«æ•°ã®ä¸¸ã‚èª¤å·®ãŒè“„ç©ã—ã€
ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã® start/end æ™‚åˆ»ãŒå…ƒéŸ³å£°ã®å®Ÿæ™‚é–“ã¨å¾®å¦™ã«ãšã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚

**è§£æ±ºç­–:**
1. **å…¨ä½“ã‚’å…ˆã«16kHzã«ãƒªã‚µãƒ³ãƒ—ãƒ«**: ãƒãƒ£ãƒ³ã‚¯å‡¦ç†å‰ã«çµ±ä¸€
2. **frame_size ã®æ•´æ•°å€ã§ãƒãƒ£ãƒ³ã‚¯åŒ–**: ãƒ•ãƒ¬ãƒ¼ãƒ å¢ƒç•Œã®ãšã‚Œã‚’é˜²æ­¢
3. **æ™‚é–“è¨ˆç®—ã¯16kHzåŸºæº–**: `start_time = sample_index / 16000`

**å®Ÿè£…ä¸Šã®æ³¨æ„:**
```python
# âŒ æ‚ªã„ä¾‹: ãƒãƒ£ãƒ³ã‚¯ã”ã¨ã«ãƒªã‚µãƒ³ãƒ—ãƒ«ï¼ˆæ™‚é–“ãšã‚Œã®åŸå› ï¼‰
for chunk in chunks:
    chunk_16k = resample(chunk, orig_sr, 16000)  # æ¯å›ä¸¸ã‚èª¤å·®
    process(chunk_16k)

# âœ… è‰¯ã„ä¾‹: å…ˆã«å…¨ä½“ã‚’ãƒªã‚µãƒ³ãƒ—ãƒ«
audio_16k = resample(full_audio, orig_sr, 16000)  # ä¸€åº¦ã ã‘
for chunk in split_into_chunks(audio_16k, frame_size * N):
    process(chunk)
```

##### ã‚»ã‚°ãƒ¡ãƒ³ãƒˆçµåˆæˆ¦ç•¥

VAD ã§æ¤œå‡ºã—ãŸã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’ ASR ã«æ¸¡ã—ãŸå¾Œã€å„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®æ–‡å­—èµ·ã“ã—çµæœã‚’çµåˆã™ã‚‹éš›ã®æˆ¦ç•¥:

**è¨€èªãƒ™ãƒ¼ã‚¹çµåˆ:**
```python
def combine_segments(transcripts: list[str], language: str) -> str:
    """ã‚»ã‚°ãƒ¡ãƒ³ãƒˆçµæœã‚’è¨€èªã«å¿œã˜ã¦çµåˆã€‚"""
    if language == "ja":
        # æ—¥æœ¬èª: ã‚¹ãƒšãƒ¼ã‚¹ãªã—
        return "".join(transcripts)
    else:
        # è‹±èªç­‰: ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Š
        return " ".join(transcripts)
```

**ç†ç”±:**
- æ—¥æœ¬èªã¯å˜èªé–“ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒãªã„ãŸã‚ã€é€£çµã®ã¿
- è‹±èªç­‰ã¯å˜èªå¢ƒç•Œã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå¿…è¦

#### C-3: Quick Mode æ§‹æˆ

**æ±ºå®šäº‹é …:** å…¨ VAD æ§‹æˆ + æœ€å°ãƒ‡ãƒ¼ã‚¿ã§é«˜é€Ÿã«å…¨ä½“ã‚’ã‚«ãƒãƒ¼

| é …ç›® | æ§‹æˆ |
|------|------|
| VAD | å…¨ 9 æ§‹æˆ (Silero, WebRTCÃ—4, JaVADÃ—3, TenVAD) |
| ASR | è¨€èªåˆ¥ 1-2 ã‚¨ãƒ³ã‚¸ãƒ³ (ja: parakeet_ja, en: parakeet) |
| ãƒ‡ãƒ¼ã‚¿ | ja: 1-2 ãƒ•ã‚¡ã‚¤ãƒ«, en: 1-2 ãƒ•ã‚¡ã‚¤ãƒ« |
| æ¨å®šæ™‚é–“ | ~3-5 åˆ† |

**ç†ç”±:**
- VAD ã®ç¶²ç¾…æ€§ã‚’å„ªå…ˆï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…ã®æ¤œè¨¼ãŒä¸»ç›®çš„ï¼‰
- ASR ã¯å‹•ä½œç¢ºèªæ¸ˆã¿ã®ãŸã‚æœ€å°é™ã§OK
- å…¨ VAD Ã— å°‘æ•°ãƒ‡ãƒ¼ã‚¿ã§å•é¡Œã‚’æ—©æœŸæ¤œå‡º

#### C-4: å®Ÿè£…è©³ç´°ã®ç¢ºå®šäº‹é …

##### VADProcessor ãƒ•ãƒ¬ãƒ¼ãƒ ã‚µã‚¤ã‚ºå¯¾å¿œ

**æ±ºå®š:** ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã¨ã—ã¦åˆæœŸåŒ–æ™‚ã«è¨­å®šï¼ˆé¸æŠè‚¢ Aï¼‰

```python
class VADProcessor:
    SAMPLE_RATE: int = 16000  # å›ºå®šï¼ˆå…¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å…±é€šï¼‰

    def __init__(self, backend: VADBackend = None):
        self._backend = backend or self._create_default_backend()
        self._frame_size = self._backend.frame_size  # ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°

    @property
    def frame_size(self) -> int:
        return self._frame_size
```

**ç†ç”±:** ãƒ•ãƒ¬ãƒ¼ãƒ ã‚µã‚¤ã‚ºã¯å®Ÿè¡Œä¸­ã«å¤‰ã‚ã‚‰ãªã„ãŸã‚ã€åˆæœŸåŒ–æ™‚ã®ä¸€åº¦ã®å–å¾—ã§ååˆ†ã€‚

##### VADBackend ã® cleanup() ãƒ¡ã‚½ãƒƒãƒ‰

**æ±ºå®š:** ä¸è¦ï¼ˆ`reset()` ã§ååˆ†ï¼‰

**ç†ç”±:**
- Silero: `reset_states()` ã§çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆã€ãƒ¢ãƒ‡ãƒ«ã¯ torch ãŒç®¡ç†
- WebRTC: ç´”ç²‹ãª C æ‹¡å¼µã€æ˜ç¤ºçš„è§£æ”¾ä¸è¦
- TenVAD: è»½é‡ã€æ˜ç¤ºçš„è§£æ”¾ä¸è¦
- å¿…è¦ã«ãªã‚Œã°å¾Œã‹ã‚‰è¿½åŠ å¯èƒ½ï¼ˆProtocol ã¯å¾Œæ–¹äº’æ›ã§æ‹¡å¼µå¯èƒ½ï¼‰

##### ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒ¼ãƒˆçµ±ä¸€

**æ±ºå®š:** 16kHz çµ±ä¸€

| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | ãƒã‚¤ãƒ†ã‚£ãƒ–å¯¾å¿œ | å®Ÿè£…æ–¹é‡ |
|-------------|--------------|---------|
| Silero | 8kHz, 16kHz | 16kHz ä½¿ç”¨ |
| WebRTC | 8-48kHz | 16kHz ä½¿ç”¨ |
| TenVAD | 16kHz only | 16kHz ä½¿ç”¨ |

**ç†ç”±:**
- `VADProcessor` ã®æ—¢å­˜ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ´»ç”¨
- å„ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ 16kHz å…¥åŠ›ã‚’å‰æã¨ã—ã¦å®Ÿè£…
- WebRTC ã® 8kHz æœ€é©åŒ–ã¯å°†æ¥ã®æ¤œè¨äº‹é …

##### VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœæ§‹é€ 

**æ±ºå®š:** æ—¢å­˜ `BenchmarkResult` ã‚’æ‹¡å¼µ

```python
@dataclass
class BenchmarkResult:
    # æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆASRï¼‰
    engine: str
    language: str
    audio_file: str
    transcript: str
    reference: str
    wer: float | None = None
    cer: float | None = None
    rtf: float | None = None
    audio_duration_s: float | None = None
    processing_time_s: float | None = None
    # ... memory fields ...

    # VAD æ‹¡å¼µãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ï¼‰
    vad: str | None = None                     # VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å
    vad_config: dict | None = None             # VAD è¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆå†ç¾æ€§ç¢ºä¿ç”¨ï¼‰
    vad_rtf: float | None = None               # VAD å‡¦ç†ã® RTF
    segments_count: int | None = None          # æ¤œå‡ºã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ•°
    avg_segment_duration_s: float | None = None  # å¹³å‡ã‚»ã‚°ãƒ¡ãƒ³ãƒˆé•·ï¼ˆç§’ï¼‰
    speech_ratio: float | None = None          # éŸ³å£°åŒºé–“ã®å‰²åˆï¼ˆè¨ºæ–­ç”¨ï¼‰
```

**C-2 ã§è¿½åŠ ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:**
- `vad_rtf`: VAD å‡¦ç†é€Ÿåº¦ã®è©•ä¾¡ã«å¿…è¦
- `segments_count`: ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ†å‰²æ•°ã®æŠŠæ¡ã«å¿…è¦
- `avg_segment_duration_s`: ã‚»ã‚°ãƒ¡ãƒ³ãƒˆç²’åº¦ã®è©•ä¾¡ã«å¿…è¦
- `speech_ratio`: VAD ã®å‚¾å‘æŠŠæ¡ã«å¿…è¦ï¼ˆç©æ¥µçš„/ä¿å®ˆçš„ï¼‰
- `vad_config`: VAD ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨˜éŒ²ï¼ˆå†ç¾æ€§ãƒ»è¨ºæ–­èƒ½åŠ›ã®ç¢ºä¿ï¼‰

**speech_ratio ã®æ„ç¾©:**
```
speech_ratio = sum(segment_durations) / audio_duration

speech_ratio ãŒé«˜ã„ â†’ ç©æ¥µçš„ã«éŸ³å£°æ¤œå‡ºï¼ˆFalse Positive å‚¾å‘ï¼‰
speech_ratio ãŒä½ã„ â†’ ä¿å®ˆçš„ã«æ¤œå‡ºï¼ˆFalse Negative å‚¾å‘ï¼‰
```

**vad_config ã®æ„ç¾©:**
- å†ç¾æ€§ã®ç¢ºä¿: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚Œã°åŒã˜æ¡ä»¶ã§å†å®Ÿè¡Œå¯èƒ½
- è¨ºæ–­èƒ½åŠ›ã®å‘ä¸Š: WER ãŒæ‚ªã„åŸå› ã‚’ VAD ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰æ¨æ¸¬å¯èƒ½
- å°†æ¥ã®æ¯”è¼ƒ: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´å®Ÿé¨“ã®éš›ã«åŸºæº–ã¨ãªã‚‹

**ç”¨é€”:**
- `vad=None`: ASR å˜ä½“ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
- `vad="silero"`: VAD+ASR çµ±åˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

##### CI ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ§‹æˆ

**æ±ºå®š:** åˆ†é›¢æ–¹å¼ï¼ˆ`asr-benchmark.yml` + `vad-benchmark.yml`ï¼‰

```
.github/workflows/
â”œâ”€â”€ asr-benchmark.yml     # ASR å˜ä½“ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼ˆæ—¢å­˜ï¼‰
â”œâ”€â”€ vad-benchmark.yml     # VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼ˆC-3 ã§æ–°è¦ä½œæˆï¼‰
â””â”€â”€ core-tests.yml        # æ—¢å­˜
```

**ASR Benchmark (`asr-benchmark.yml`):**
- VAD ã¯ Silero å›ºå®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- ASR ã‚¨ãƒ³ã‚¸ãƒ³ã®æ¯”è¼ƒãŒç›®çš„

**VAD Benchmark (`vad-benchmark.yml`):**
- ASR ã¯è¨€èªåˆ¥ã«å›ºå®šï¼ˆja: parakeet_ja, en: parakeetï¼‰
- VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®æ¯”è¼ƒãŒç›®çš„

```yaml
# .github/workflows/vad-benchmark.yml
name: VAD Benchmark

on:
  workflow_dispatch:
    inputs:
      mode:
        type: choice
        options: [quick, standard, full]
        default: quick
      language:
        type: choice
        options: [ja, en, both]
        default: both
      vad:
        description: 'Specific VAD (comma-separated, empty=all)'
        required: false
```

**åˆ†é›¢ã®ç†ç”±:**
1. **æ¦‚å¿µçš„åˆ†é›¢**: ASR/VAD ã¯ç•°ãªã‚‹æ¯”è¼ƒç›®çš„
2. **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç°¡æ½”åŒ–**: å„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«å¿…è¦ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã¿
3. **ç‹¬ç«‹å®Ÿè¡Œ**: ç”¨é€”ã«å¿œã˜ã¦å€‹åˆ¥ã«ãƒˆãƒªã‚¬ãƒ¼å¯èƒ½
4. **éšœå®³åˆ†é›¢**: ä¸€æ–¹ã®å¤±æ•—ãŒä»–æ–¹ã«å½±éŸ¿ã—ãªã„
5. **GitHub Actions UI**: ç›®çš„ãŒæ˜ç¢ºã§è¦‹ã¤ã‘ã‚„ã™ã„

**ã‚³ãƒ¼ãƒ‰é‡è¤‡ã¸ã®å¯¾å‡¦:**
- ç¾æ™‚ç‚¹: å…±é€šã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ~30è¡Œï¼‰ã®é‡è¤‡ã¯è¨±å®¹ç¯„å›²
- å°†æ¥: å•é¡Œã«ãªã‚Œã° Composite Action ã«æŠ½å‡º

##### ProgressReporter ã®æ‹¡å¼µ

**æ±ºå®š:** æ—¢å­˜ ProgressReporter ã‚’æ‹¡å¼µï¼ˆæ–°ã‚¯ãƒ©ã‚¹ä½œæˆã§ã¯ãªã„ï¼‰

```python
class ProgressReporter:
    def engine_started(
        self,
        engine_id: str,
        language: str,
        files_count: int,
        vad_name: str | None = None,  # è¿½åŠ : VADåï¼ˆVADãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ™‚ã®ã¿ï¼‰
    ) -> None:
        ...
```

**Step Summary ã®å¤‰æ›´ï¼ˆVAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ™‚ï¼‰:**
```
| # | VAD | Engine | Lang | Files | WER | CER | RTF | Time | Status |
|---|-----|--------|------|-------|-----|-----|-----|------|--------|
| 1 | silero | parakeet_ja | ja | 100/100 | 4.2% | 2.1% | 0.15 | 45s | âœ… |
| 2 | webrtc_mode3 | parakeet_ja | ja | 100/100 | 4.5% | 2.3% | 0.14 | 43s | âœ… |
```

**æ‹¡å¼µã®ç†ç”±:**
1. **ã‚³ãƒ¼ãƒ‰å†åˆ©ç”¨**: é€²æ—è¡¨ç¤ºã€Step Summaryã€ETAè¨ˆç®—ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç¶™æ‰¿
2. **ä¸€è²«æ€§**: ASR/VAD ä¸¡æ–¹ã§åŒã˜è¦‹ãŸç›®ã®ãƒ¬ãƒãƒ¼ãƒˆ
3. **ã‚·ãƒ³ãƒ—ãƒ«**: æ–°ã‚¯ãƒ©ã‚¹ä½œæˆã‚ˆã‚Šå¤‰æ›´é‡ãŒå°‘ãªã„

**é€²æ—è¡¨ç¤ºãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆVAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ™‚ï¼‰:**
```
[1/9] silero + parakeet_ja (ja): Processing 100 files...
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 80/100 files (2m 15s remaining)
```

VADå + ASRå ã®çµ„ã¿åˆã‚ã›ã§è¡¨ç¤ºã—ã€ä½•ã‚’è©•ä¾¡ä¸­ã‹æ˜ç¢ºã«ã™ã‚‹ã€‚

#### C-5: VAD Factory è¨­è¨ˆ

**æ±ºå®š:** ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼ï¼ˆRegistry + Factoryã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—ï¼‰

```python
# benchmarks/vad/factory.py

# Registry: VAD æ§‹æˆã®å®šç¾©
VAD_REGISTRY: dict[str, dict] = {
    # Protocolæº–æ‹  VAD (VADProcessorWrapper ã§ä½¿ç”¨)
    "silero": {"type": "protocol", "backend_class": "SileroVAD", "params": {}},
    "webrtc_mode0": {"type": "protocol", "backend_class": "WebRTCVAD", "params": {"mode": 0}},
    "webrtc_mode1": {"type": "protocol", "backend_class": "WebRTCVAD", "params": {"mode": 1}},
    "webrtc_mode2": {"type": "protocol", "backend_class": "WebRTCVAD", "params": {"mode": 2}},
    "webrtc_mode3": {"type": "protocol", "backend_class": "WebRTCVAD", "params": {"mode": 3}},
    "tenvad": {"type": "protocol", "backend_class": "TenVAD", "params": {}},
    # JaVAD (ç›´æ¥ process_audio ã‚’æŒã¤)
    "javad_tiny": {"type": "javad", "model": "tiny"},
    "javad_balanced": {"type": "javad", "model": "balanced"},
    "javad_precise": {"type": "javad", "model": "precise"},
}

def create_vad(vad_id: str) -> VADBenchmarkBackend:
    """VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã€‚

    æ¯å›æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—ï¼‰ã€‚

    Args:
        vad_id: VAD è­˜åˆ¥å­ï¼ˆVAD_REGISTRY ã®ã‚­ãƒ¼ï¼‰

    Returns:
        VADBenchmarkBackend ã‚’å®Ÿè£…ã™ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹

    Raises:
        ValueError: ä¸æ˜ãª vad_id
    """
    if vad_id not in VAD_REGISTRY:
        raise ValueError(f"Unknown VAD: {vad_id}. Available: {list(VAD_REGISTRY.keys())}")

    config = VAD_REGISTRY[vad_id]

    if config["type"] == "javad":
        from benchmarks.vad.backends.javad import JaVADPipeline
        return JaVADPipeline(model=config["model"])
    else:
        # Protocolæº–æ‹  VAD
        backend = _create_protocol_backend(config)
        return VADProcessorWrapper(backend)

def get_all_vad_ids() -> list[str]:
    """åˆ©ç”¨å¯èƒ½ãªå…¨ VAD ID ã‚’è¿”ã™ã€‚"""
    return list(VAD_REGISTRY.keys())
```

**ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—ã®ç†ç”±:**
1. **çŠ¶æ…‹æ±šæŸ“ã®å›é¿**: `reset()` ãŒã‚ã‚‹ãŒã€å®Œå…¨ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¹ãƒ¬ãƒ¼ãƒˆãŒæœ›ã¾ã—ã„
2. **ãƒ¡ãƒ¢ãƒªç®¡ç†ã®ç°¡ç´ åŒ–**: VAD ã¯è»½é‡ã€æ¯å›ç”Ÿæˆã—ã¦ã‚‚å•é¡Œãªã—
3. **ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§**: å„ãƒ†ã‚¹ãƒˆã§ç‹¬ç«‹ã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
4. **ASR ã‚¨ãƒ³ã‚¸ãƒ³ã¨ã®é•ã„**: ASR ã¯é‡é‡ç´šï¼ˆæ•°GBï¼‰ã€VAD ã¯è»½é‡ï¼ˆæ•°MBï¼‰

#### C-6: ç©ºã‚»ã‚°ãƒ¡ãƒ³ãƒˆãƒ»çŸ­ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®å‡¦ç†

**æ±ºå®š:**
- **0 ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ â†’ ç©ºæ–‡å­—åˆ—ã® transcript**: ã‚¨ãƒ©ãƒ¼ã§ã¯ãªãæ­£å¸¸ãªã‚±ãƒ¼ã‚¹
- **çŸ­ã„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã¯ãƒ•ã‚£ãƒ«ã‚¿ãªã—**: VAD ã®åˆ¤æ–­ã‚’ãã®ã¾ã¾æ¡ç”¨

```python
def benchmark_file(
    self,
    vad: VADBenchmarkBackend,
    engine: TranscriptionEngine,
    audio_file: AudioFile,
) -> BenchmarkResult:
    """1ãƒ•ã‚¡ã‚¤ãƒ«ã® VAD + ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã€‚"""

    # VAD å‡¦ç†
    vad_start = time.perf_counter()
    segments = vad.process_audio(audio_file.audio, audio_file.sample_rate)
    vad_time = time.perf_counter() - vad_start

    # ç©ºã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®å ´åˆ
    if not segments:
        return BenchmarkResult(
            engine=engine_id,
            vad=vad.name,
            vad_config=vad.config,  # VAD ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨˜éŒ²
            language=audio_file.language,
            audio_file=audio_file.stem,
            transcript="",  # ç©ºæ–‡å­—åˆ—
            reference=audio_file.transcript,
            wer=calculate_wer(audio_file.transcript, ""),  # å‚ç…§ã¨ã®æ¯”è¼ƒ
            cer=calculate_cer(audio_file.transcript, ""),
            vad_rtf=vad_time / audio_file.duration,
            rtf=0.0,  # ASR æœªå®Ÿè¡Œ
            segments_count=0,
            avg_segment_duration_s=0.0,
            speech_ratio=0.0,  # éŸ³å£°ãªã—
        )

    # å„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’ ASR ã§å‡¦ç†ï¼ˆçŸ­ã„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚‚ãã®ã¾ã¾ï¼‰
    transcripts = []
    asr_total_time = 0.0

    for start, end in segments:
        segment_audio = extract_segment(audio_file.audio, start, end, audio_file.sample_rate)
        asr_start = time.perf_counter()
        transcript, _ = engine.transcribe(segment_audio, audio_file.sample_rate)
        asr_total_time += time.perf_counter() - asr_start
        transcripts.append(transcript)

    # çµæœã®çµåˆ
    full_transcript = combine_segments(transcripts, audio_file.language)

    # ã‚»ã‚°ãƒ¡ãƒ³ãƒˆçµ±è¨ˆã‚’è¨ˆç®—
    total_speech_duration = sum(e - s for s, e in segments)
    speech_ratio = total_speech_duration / audio_file.duration

    return BenchmarkResult(
        engine=engine_id,
        vad=vad.name,
        vad_config=vad.config,  # VAD ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨˜éŒ²
        language=audio_file.language,
        audio_file=audio_file.stem,
        transcript=full_transcript,
        reference=audio_file.transcript,
        wer=calculate_wer(audio_file.transcript, full_transcript),
        cer=calculate_cer(audio_file.transcript, full_transcript),
        vad_rtf=vad_time / audio_file.duration,  # VAD ã®ã¿
        rtf=asr_total_time / audio_file.duration,  # ASR ã®ã¿
        segments_count=len(segments),
        avg_segment_duration_s=total_speech_duration / len(segments),
        speech_ratio=speech_ratio,  # éŸ³å£°åŒºé–“ã®å‰²åˆ
    )
```

**è¨­è¨ˆç†ç”±:**
- **ç©ºã‚»ã‚°ãƒ¡ãƒ³ãƒˆ**: ç„¡éŸ³ãƒ•ã‚¡ã‚¤ãƒ«ã¯å­˜åœ¨ã—å¾—ã‚‹ã€‚WER/CER ã§ã€Œå…¨å‰Šé™¤ã€ã¨ã—ã¦è©•ä¾¡
- **çŸ­ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ**: ãƒ•ã‚£ãƒ«ã‚¿ã™ã‚‹ã¨ VAD ã®å•é¡Œã‚’éš è”½ã€‚VAD è¨­å®šï¼ˆ`min_speech_ms` ç­‰ï¼‰ã§èª¿æ•´ã™ã¹ã
- **RTF åˆ†é›¢**: VAD ã¨ ASR ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ç‰¹å®šãŒå®¹æ˜“
- **speech_ratio**: VAD ã®å‚¾å‘ï¼ˆç©æ¥µçš„/ä¿å®ˆçš„ï¼‰ã‚’å®šé‡åŒ–
- **vad_config**: å†ç¾æ€§ã¨è¨ºæ–­èƒ½åŠ›ã®ç¢ºä¿

#### C-7: Quick Mode ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹

**æ±ºå®š:** æ—¢å­˜ã® DatasetManager ã‚’ãã®ã¾ã¾ä½¿ç”¨

```python
# benchmarks/vad/runner.py
class VADBenchmarkRunner:
    def __init__(self, config: VADBenchmarkConfig):
        self.dataset_manager = DatasetManager()  # æ—¢å­˜ã‚’å†åˆ©ç”¨

    def _benchmark_language(self, language: str) -> None:
        # mode ã«å¿œã˜ã¦é©åˆ‡ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’å–å¾—
        dataset = self.dataset_manager.get_dataset(language, mode=self.config.mode)
        # quick â†’ tests/assets/audio/{lang}/
        # standard/full â†’ tests/assets/prepared/{lang}/
```

**ç†ç”±:**
- ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¨åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ä¸€è²«æ€§ã‚’ç¢ºä¿
- DatasetManager ã¯ mode ã«å¿œã˜ã¦ãƒ‘ã‚¹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹æ©Ÿèƒ½ã‚’æ—¢ã«æŒã£ã¦ã„ã‚‹
- æ–°è¦å®Ÿè£…ä¸è¦

#### ä¾å­˜é–¢ä¿‚è¿½åŠ 

`pyproject.toml` ã¸ã®è¿½åŠ :

```toml
[project.optional-dependencies]
# æ—¢å­˜ï¼ˆå¤‰æ›´ãªã—ï¼‰
vad = ["silero-vad>=5.1"]

# æ–°è¦: å€‹åˆ¥ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
vad-webrtc = ["webrtcvad>=2.0.10"]  # è»½é‡ã€torch ä¸è¦
vad-tenvad = ["ten-vad"]            # è»½é‡
vad-javad = ["javad"]               # torch å…±æœ‰ï¼ˆãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç”¨ï¼‰

# å…¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
vad-all = [
    "livecap-core[vad]",
    "livecap-core[vad-webrtc]",
    "livecap-core[vad-tenvad]",
    "livecap-core[vad-javad]",
]

# ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
benchmark = [
    "livecap-core[vad-all]",
    "jiwer>=3.0",
    # ... æ—¢å­˜ ...
]
```

**ä¾å­˜é–¢ä¿‚ã®åˆ†é›¢ç†ç”±:**
- `webrtcvad` ã¯éå¸¸ã«è»½é‡ï¼ˆC æ‹¡å¼µã®ã¿ã€ML ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä¸è¦ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¿…è¦ãªãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã¿ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½
- `[vad]` ã¯ Silero ã®ã¾ã¾ï¼ˆæ—¢å­˜äº’æ›æ€§ç¶­æŒï¼‰

---

## 9. CLI ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

### 9.1 ASR ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

```bash
# å…¨ã‚¨ãƒ³ã‚¸ãƒ³æ¯”è¼ƒ
python -m benchmarks.asr --all

# è¨€èªåˆ¥æ¯”è¼ƒ
python -m benchmarks.asr --language ja

# ç‰¹å®šã‚¨ãƒ³ã‚¸ãƒ³
python -m benchmarks.asr --engine reazonspeech parakeet_ja whispers2t_base

# å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰
python -m benchmarks.asr --mode quick    # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ2ã‚¨ãƒ³ã‚¸ãƒ³
python -m benchmarks.asr --mode standard # è¨€èªåˆ¥å…¨ã‚¨ãƒ³ã‚¸ãƒ³
python -m benchmarks.asr --mode full     # å…¨ã‚¨ãƒ³ã‚¸ãƒ³Ã—å…¨è¨€èª

# å‡ºåŠ›å½¢å¼
python -m benchmarks.asr --output results.json --format json
python -m benchmarks.asr --output report.md --format markdown
```

### 9.2 VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

```bash
# ã‚¯ã‚¤ãƒƒã‚¯å®Ÿè¡Œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ VAD + ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ ASRï¼‰
python -m benchmarks.vad

# å…¨ VAD Ã— è¨€èªåˆ¥æ¨å¥¨ ASR
python -m benchmarks.vad --all-vad

# ç‰¹å®š VAD + å…¨å¯¾å¿œ ASR
python -m benchmarks.vad --vad silero_v6 javad_precise --all-asr

# å…¨ VAD Ã— å…¨ ASRï¼ˆãƒ•ãƒ«ãƒ¢ãƒ¼ãƒ‰ï¼‰
python -m benchmarks.vad --full

# è¨€èªæŒ‡å®š
python -m benchmarks.vad --language ja --all-vad

# ç‰¹å®šã‚¨ãƒ³ã‚¸ãƒ³æŒ‡å®š
python -m benchmarks.vad --asr reazonspeech parakeet_ja whispers2t_base

# å‡ºåŠ›å½¢å¼
python -m benchmarks.vad --output results.json --format json
python -m benchmarks.vad --output report.md --format markdown
```

### 9.3 çµ±åˆå®Ÿè¡Œ

```bash
# ä¸¡æ–¹ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å®Ÿè¡Œ
python -m benchmarks --type both --mode standard

# ASRã®ã¿
python -m benchmarks --type asr --mode quick

# VADã®ã¿
python -m benchmarks --type vad --mode full
```

---

## 10. å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

### 10.1 å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

**æ±ºå®šäº‹é …:** ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ããƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§è¤‡æ•°å›ã®å®Ÿè¡Œçµæœã‚’ä¿æŒ

```
benchmark_results/
  {YYYYMMDD_HHMMSS}_{mode}/     # ä¾‹: 20250126_143052_quick/
    summary.md                   # å…¨ä½“ã‚µãƒãƒªãƒ¼ï¼ˆMarkdownï¼‰
    raw/
      {engine}_{lang}.csv        # ä¾‹: parakeet_ja_ja.csv, whispers2t_large_v3_en.csv
```

**å½¹å‰²åˆ†æ‹…:**
- `summary.md`: äººé–“ãŒèª­ã‚€ãƒ¬ãƒãƒ¼ãƒˆï¼ˆé›†ç´„çµæœã€Best/Fastestç­‰ï¼‰
- `raw/*.csv`: åˆ†æç”¨ãƒ‡ãƒ¼ã‚¿ï¼ˆå„ãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°çµæœï¼‰

### 10.2 ç”Ÿãƒ‡ãƒ¼ã‚¿å½¢å¼ï¼ˆCSVï¼‰

**æ±ºå®šäº‹é …:** CSVå½¢å¼ï¼ˆJSONã¯ãƒ‡ãƒ¼ã‚¿ãŒè†¨ã‚ŒãŒã¡ãªãŸã‚ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½:** ã‚¨ãƒ³ã‚¸ãƒ³Ã—è¨€èªã”ã¨ã«1ãƒ•ã‚¡ã‚¤ãƒ«

**CSVæ§‹é€ :**
```csv
file_id,reference,transcript,cer,wer,rtf,duration_sec
JSUT_basic5000_0001,æ°´ã‚’ãƒãƒ¬ãƒ¼ã‚·ã‚¢ã‹ã‚‰è²·ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã§ã™,æ°´ã‚’ãƒãƒ¬ãƒ¼ã‚·ã‚¢ã‹ã‚‰è²·ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã§ã™,0.0000,0.0000,0.12,3.45
JSUT_basic5000_0002,ã‚ˆãã‚ˆãèª¿ã¹ã‚Œã°ã¤ã¾ã‚‰ãªã„è©±ã ã¨æ€ã†,ã‚ˆãã‚ˆãèª¿ã¹ã‚Œè©°ã‚‰ãªã„è©±ã ã¨æ€ã†,0.0526,0.1429,0.15,2.89
```

**ã‚«ãƒ©ãƒ å®šç¾©:**

| ã‚«ãƒ©ãƒ  | èª¬æ˜ |
|--------|------|
| `file_id` | ãƒ•ã‚¡ã‚¤ãƒ«è­˜åˆ¥å­ |
| `reference` | æ•™å¸«æ–‡å­—åˆ—ï¼ˆæ­£è§£ï¼‰ |
| `transcript` | æ–‡å­—èµ·ã“ã—çµæœ |
| `cer` | Character Error Rateï¼ˆæ­£è¦åŒ–å¾Œï¼‰ |
| `wer` | Word Error Rateï¼ˆæ­£è¦åŒ–å¾Œï¼‰ |
| `rtf` | Real-Time Factor |
| `duration_sec` | éŸ³å£°ã®é•·ã•ï¼ˆç§’ï¼‰ |

**ãƒ¡ãƒªãƒƒãƒˆ:**
- ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆï¼ˆExcelç­‰ï¼‰ã§ã®åˆ†æãŒå®¹æ˜“
- å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ï¼ˆdiffç­‰ï¼‰ã§ã®è©³ç´°æ¯”è¼ƒãŒå¯èƒ½
- `reference` ã¨ `transcript` ã‚’ä¸¦åˆ—è¡¨ç¤ºã™ã‚‹ã“ã¨ã§æ¯”è¼ƒãŒå¯èƒ½

### 10.3 ã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆï¼ˆMarkdownï¼‰

**å†…å®¹:**
- ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œæƒ…å ±ï¼ˆæ—¥æ™‚ã€ãƒ¢ãƒ¼ãƒ‰ã€å®Ÿè¡Œå›æ•°ï¼‰
- ã‚¨ãƒ³ã‚¸ãƒ³Ã—è¨€èªã”ã¨ã®é›†ç´„çµæœãƒ†ãƒ¼ãƒ–ãƒ«
- Best by languageï¼ˆæœ€é«˜ç²¾åº¦ï¼‰
- Fastestï¼ˆæœ€é«˜é€Ÿï¼‰
- Lowest VRAMï¼ˆæœ€å°ãƒ¡ãƒ¢ãƒªï¼‰

**å‡ºåŠ›ä¾‹:**
```markdown
# ASR Benchmark Report

**Date:** 2025-01-26 14:30:52
**Mode:** standard
**Runs:** 3

## Results by Language

### Japanese (ja)

| Engine | CER | WER | RTF (meanÂ±std) | VRAM |
|--------|-----|-----|----------------|------|
| parakeet_ja | 3.2% | 8.1% | 0.12 Â± 0.01 | 3584MB |
| whispers2t_large_v3 | 4.1% | 9.5% | 0.15 Â± 0.02 | 1536MB |

**Best CER:** parakeet_ja (3.2%)
**Fastest:** parakeet_ja (RTF 0.12)

### English (en)
...

## Summary

- **Total files:** 200
- **Total duration:** 1234.5 sec
- **Errors/Skipped:** 2
```

### 10.4 VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å‡ºåŠ›ï¼ˆPhase Cï¼‰

#### CSV æ§‹é€ 

VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã¯è¿½åŠ ã‚«ãƒ©ãƒ ã‚’å«ã‚€:

```csv
file_id,vad,asr,reference,transcript,cer,wer,rtf,vad_rtf,segments_count,speech_ratio,duration_sec
```

| ã‚«ãƒ©ãƒ  | èª¬æ˜ |
|--------|------|
| `vad` | VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å |
| `asr` | ASR ã‚¨ãƒ³ã‚¸ãƒ³å |
| `vad_rtf` | VAD å‡¦ç†ã® Real-Time Factor |
| `segments_count` | æ¤œå‡ºã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ•° |
| `speech_ratio` | éŸ³å£°åŒºé–“ã®å‰²åˆï¼ˆ0.0-1.0ï¼‰ |

#### ã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã® VAD è¨­å®šãƒ†ãƒ¼ãƒ–ãƒ«

**å†ç¾æ€§ã¨è¨ºæ–­èƒ½åŠ›ã®ç¢ºä¿ã®ãŸã‚ã€VAD ã®è¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒ¬ãƒãƒ¼ãƒˆã«å«ã‚ã‚‹ã€‚**

```markdown
# VAD Benchmark Report

**Date:** 2025-01-28 14:30:52
**Mode:** standard

## VAD Configurations

| ID | Backend | Parameters |
|----|---------|------------|
| silero | SileroVAD | threshold=0.5 |
| webrtc_mode0 | WebRTCVAD | mode=0, frame_duration_ms=20 |
| webrtc_mode1 | WebRTCVAD | mode=1, frame_duration_ms=20 |
| webrtc_mode2 | WebRTCVAD | mode=2, frame_duration_ms=20 |
| webrtc_mode3 | WebRTCVAD | mode=3, frame_duration_ms=20 |
| tenvad | TenVAD | hop_size=256, threshold=0.5 |
| javad_tiny | JaVADPipeline | model=tiny, window_ms=640 |
| javad_balanced | JaVADPipeline | model=balanced, window_ms=1920 |
| javad_precise | JaVADPipeline | model=precise, window_ms=3840 |

## Results by Language

### Japanese (ja)

| VAD | ASR | CER | WER | RTF | VAD RTF | Segments | Speech Ratio |
|-----|-----|-----|-----|-----|---------|----------|--------------|
| silero | parakeet_ja | 3.2% | 8.1% | 0.12 | 0.02 | 45 | 0.72 |
| webrtc_mode3 | parakeet_ja | 4.5% | 9.8% | 0.12 | 0.01 | 52 | 0.68 |
| javad_precise | parakeet_ja | 3.0% | 7.9% | 0.12 | 0.05 | 38 | 0.75 |

**Best CER:** javad_precise + parakeet_ja (3.0%)
**Fastest VAD:** webrtc_mode3 (VAD RTF 0.01)
**Highest Speech Ratio:** javad_precise (0.75)
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ„ç¾©:**
1. **å†ç¾æ€§**: åŒã˜ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å†å®Ÿè¡Œå¯èƒ½
2. **è¨ºæ–­**: WER å·®ç•°ã®åŸå› ã‚’æ¨æ¸¬å¯èƒ½ï¼ˆä¾‹: mode 0 vs mode 3ï¼‰
3. **æ¯”è¼ƒ**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´æ™‚ã®å½±éŸ¿ã‚’è¿½è·¡å¯èƒ½

---

## 11. CI ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### 11.1 ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

**æ§‹æˆ:** åˆ†é›¢æ–¹å¼ï¼ˆASR ã¨ VAD ã‚’åˆ¥ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«åˆ†é›¢ï¼‰

```
.github/workflows/
â”œâ”€â”€ asr-benchmark.yml     # ASR å˜ä½“ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼ˆæ—¢å­˜ï¼‰
â”œâ”€â”€ vad-benchmark.yml     # VAD ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼ˆC-3 ã§æ–°è¦ä½œæˆï¼‰
â””â”€â”€ core-tests.yml        # æ—¢å­˜
```

**ASR Benchmark (`asr-benchmark.yml`):**
- ç›®çš„: ASR ã‚¨ãƒ³ã‚¸ãƒ³ã®æ¯”è¼ƒ
- VAD: Silero å›ºå®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: `mode`, `language`, `engine`

**VAD Benchmark (`vad-benchmark.yml`):**
- ç›®çš„: VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®æ¯”è¼ƒ
- ASR: è¨€èªåˆ¥ã«å›ºå®šï¼ˆja: parakeet_ja, en: parakeetï¼‰
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: `mode`, `language`, `vad`

**å…±é€š:**
- ãƒˆãƒªã‚¬ãƒ¼: `workflow_dispatch` (æ‰‹å‹•å®Ÿè¡Œ)
- å®Ÿè¡Œç’°å¢ƒ: `[self-hosted, windows]` (RTX 4090)
- å‡¦ç†ãƒ•ãƒ­ãƒ¼:
  1. Checkout â†’ FFmpeg setup â†’ Python environment (`uv sync`)
  2. Benchmark å®Ÿè¡Œ â†’ `results.json` å‡ºåŠ›
  3. Report ç”Ÿæˆ â†’ `report.md` å‡ºåŠ›
  4. Artifact upload + GitHub Step Summary

### 11.2 å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰è©³ç´°

| ãƒ¢ãƒ¼ãƒ‰ | ASR Benchmark | VAD Benchmark | æ¨å®šæ™‚é–“ |
|--------|--------------|---------------|---------|
| `quick` | 4 (è¨€èªåˆ¥2) | 18 (9 VAD Ã— 1 ASR Ã— 2 lang) | ~3-5åˆ† |
| `standard` | 10 (è¨€èªåˆ¥å…¨) | 36-54 (9 VAD Ã— 2-3 ASR Ã— 2 lang) | ~20åˆ† |
| `full` | 20 (å…¨çµ„ã¿åˆã‚ã›) | 72+ (9 VAD Ã— å…¨ASR Ã— 2 lang) | ~60åˆ† |

---

## 12. ä¾å­˜é–¢ä¿‚

### 12.1 pyproject.toml è¿½åŠ 

> **Note**: ä¾å­˜é–¢ä¿‚ã®è©³ç´°ãªæ§‹æˆã¯ [ã‚»ã‚¯ã‚·ãƒ§ãƒ³ 8: ä¾å­˜é–¢ä¿‚è¿½åŠ ](#ä¾å­˜é–¢ä¿‚è¿½åŠ ) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
> `pyproject.toml` ã®æ›´æ–°ã¯ C-1 å®Ÿè£…æ™‚ã«è¡Œã„ã¾ã™ã€‚

**æ¡ç”¨ã™ã‚‹æ§‹æˆï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼æ–¹å¼ï¼‰:**

```toml
[project.optional-dependencies]
# å€‹åˆ¥ VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¿…è¦ãªã‚‚ã®ã®ã¿é¸æŠå¯èƒ½ï¼‰
vad = ["silero-vad>=5.1"]           # æ—¢å­˜ï¼ˆæš«å®šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
vad-webrtc = ["webrtcvad>=2.0.10"]  # è»½é‡ã€torch ä¸è¦
vad-tenvad = ["ten-vad"]            # è»½é‡ï¼ˆä½¿ç”¨æ™‚è­¦å‘Šè¡¨ç¤ºï¼‰
vad-javad = ["javad"]               # ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç”¨

# å…¨ VAD ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
vad-all = [
    "livecap-core[vad]",
    "livecap-core[vad-webrtc]",
    "livecap-core[vad-tenvad]",
    "livecap-core[vad-javad]",
]

# ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
benchmark = [
    "livecap-core[vad-all]",
    # Metrics
    "jiwer>=3.0",
    # Reporting
    "matplotlib",
    "pandas",
    "tabulate",
    # Progress display
    "tqdm>=4.0",
    # Profiling
    "memory_profiler",
]
```

**ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼æ–¹å¼ã®åˆ©ç‚¹:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¿…è¦ãª VAD ã®ã¿ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½
- `webrtcvad` ã¯éå¸¸ã«è»½é‡ï¼ˆC æ‹¡å¼µã®ã¿ã€ML ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä¸è¦ï¼‰
- `[vad]` ã¯ Silero ã®ã¾ã¾ï¼ˆæ—¢å­˜äº’æ›æ€§ç¶­æŒï¼‰
- ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œæ™‚ã¯ `[benchmark]` ã§å…¨ VAD ãŒè‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### 12.2 æ—¢å­˜ä¾å­˜ã®æ´»ç”¨

- `engines/` - ASR ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…
- `engines/metadata.py` - ã‚¨ãƒ³ã‚¸ãƒ³ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
- `engines/engine_factory.py` - ã‚¨ãƒ³ã‚¸ãƒ³ç”Ÿæˆ
- `tests/utils/text_normalization.py` - ãƒ†ã‚­ã‚¹ãƒˆæ­£è¦åŒ–

---

## 13. ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿ | å¯¾ç­– |
|--------|------|------|
| TenVAD ãƒ©ã‚¤ã‚»ãƒ³ã‚¹å•é¡Œ | ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æ¡ä»¶é™å®šçš„ | ä½¿ç”¨æ™‚ã«è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º |
| å¤§è¦æ¨¡ãƒ¢ãƒ‡ãƒ«ã®ãƒ¡ãƒ¢ãƒªä¸è¶³ | ãƒ†ã‚¹ãƒˆå¤±æ•— | ã‚¨ãƒ³ã‚¸ãƒ³ã”ã¨ã«ãƒ¡ãƒ¢ãƒªè§£æ”¾ã€é †æ¬¡å®Ÿè¡Œ |
| å…¨çµ„ã¿åˆã‚ã›ã®å®Ÿè¡Œæ™‚é–“ | CI ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | ãƒ¢ãƒ¼ãƒ‰åˆ†é›¢ï¼ˆquick/standard/fullï¼‰ |
| ã‚¨ãƒ³ã‚¸ãƒ³ä¾å­˜é–¢ä¿‚ã®ç«¶åˆ | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¤±æ•— | `engines-nemo` ã¨ `engines-torch` ã‚’åˆ†é›¢ |

---

## 14. å°†æ¥ã®æ‹¡å¼µ

### 14.1 ãƒã‚¤ã‚ºè€æ€§è©•ä¾¡

- DEMAND ãƒã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨ã®æ··åˆ
- SNR åˆ¥ã®ç²¾åº¦è©•ä¾¡

### 14.2 ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§èƒ½è©•ä¾¡

- ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·æ¸¬å®š
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æ™‚ç³»åˆ—åˆ†æ

### 14.3 å¤šè¨€èªæ‹¡å¼µ

- de, fr, es ãªã©ã®è¿½åŠ è¨€èª
- è¨€èªæ¤œå‡ºç²¾åº¦ã®è©•ä¾¡

### 14.4 VAD ç›´æ¥è©•ä¾¡

ãƒ©ãƒ™ãƒ«ä»˜ããƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã—ãŸ VAD å˜ä½“ã®ç²¾åº¦è©•ä¾¡:

| ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ | ç‰¹å¾´ | ãƒ¡ãƒˆãƒªã‚¯ã‚¹ |
|-------------|------|-----------|
| [AVA-Speech](https://arxiv.org/abs/1808.00606) | æ˜ ç”»éŸ³å£°ã€3ç¨®ãƒ©ãƒ™ãƒ« | Precision, Recall, F1 |
| [LibriParty](https://huggingface.co/speechbrain/vad-crdnn-libriparty) | é‡è¤‡ç™ºè©±ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | ROC-AUC |

**å®Ÿè£…æ¡ˆ:**
```bash
# AVA-Speech ã«ã‚ˆã‚‹ç›´æ¥è©•ä¾¡
python -m benchmarks.vad --mode direct --dataset ava-speech
```

> ğŸ“ è©³ç´°ã¯ Issue #86 ã®èª¿æŸ»ãƒ¡ãƒ¢ã€ŒVAD è©•ä¾¡æ‰‹æ³•ã®èª¿æŸ»ãƒ¡ãƒ¢ã€Option A ã‚’å‚ç…§

---

## 15. å‚è€ƒè³‡æ–™

- [Silero VAD GitHub](https://github.com/snakers4/silero-vad)
- [Silero VAD Quality Metrics](https://github.com/snakers4/silero-vad/wiki/Quality-Metrics)
- [JaVAD GitHub](https://github.com/skrbnv/javad)
- [TenVAD GitHub](https://github.com/TEN-framework/ten-vad)
- [jiwer (WER calculation)](https://github.com/jitsi/jiwer)
- `engines/metadata.py` - ã‚¨ãƒ³ã‚¸ãƒ³ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å®šç¾©
- `docs/reference/vad-comparison.md` - VAD æ¯”è¼ƒèª¿æŸ»
- `tests/integration/engines/test_smoke_engines.py` - æ—¢å­˜ã‚¨ãƒ³ã‚¸ãƒ³ãƒ†ã‚¹ãƒˆ
